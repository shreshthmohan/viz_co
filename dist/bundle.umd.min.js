!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("d3"),require("lodash-es"),require("d3-sankey")):"function"==typeof define&&define.amd?define(["exports","d3","lodash-es","d3-sankey"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).viz={},e.d3,e._,e.d3)}(this,(function(e,t,a,i){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}function r(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(a){if("default"!==a){var i=Object.getOwnPropertyDescriptor(e,a);Object.defineProperty(t,a,i.get?i:{enumerable:!0,get:function(){return e[a]}})}})),t.default=e,Object.freeze(t)}var s=r(t),o=n(a);const l=function(e,t="",a=!1){const i=s.format(t)(e);return a?i:o.default.replace(i,"G","B")},c=function(e,t=null,a=null){const i=s.timeParse(t)(e);return(i?s.timeFormat(a)(i):null)||e};function d(e){return e.replace(/[\s&',.]/g,"").toLowerCase()}function m({allComponents:e,svg:t,safetyMargin:a=5,margins:i}){const{marginLeft:n,marginRight:r,marginTop:s,marginBottom:o}=i;let l=e.node().getBBox();const c=l.width+a+n+r,d=l.height+a+s+o;t.attr("viewBox",`0 0 ${c} ${d}`),l=e.node().getBBox(),e.attr("transform",`translate(${-l.x+a/2+n}, ${-l.y+a/2+s})`)}const p=a.throttle(m,500);function g(e,t){return Math.atan(e/(2*Math.sqrt(t**2-(e/2)**2)))}function h({x1:e,y1:t,x2:a,y2:i,circleRadius:n,stickWidth:r}){const s=function({x1:e,y1:t,x2:a,y2:i}){return Math.sqrt((e-a)**2+(t-i)**2)}({x1:e,y1:t,x2:a,y2:i}),o=n,l=(c=r,d=s,Math.sqrt((c/2)**2+d**2));var c,d;const m=function({r1:e,r2:t,wl:a,pointCount:i=50}){const n=[[g(a,t),t],[g(a,e),e]],r=[[2*Math.PI-g(a,e),e],[2*Math.PI-g(a,t),t],[g(a,t),t]],s=i,o=[],l=g(a,e),c=(2*Math.PI-l-l)/s;for(let t=1;t<s;t++)o.push([l+t*c,e]);return[...n,...o,...r]}({r1:o,r2:l<o?o:l,wl:r});return m}function u({chartCore:e,dataParsed:t,sizeField:a,nameField:i,defaultStateAll:n,xFieldStart:r,xFieldEnd:c,xScale:m,yScale:p,yFieldStart:g,yFieldEnd:u,circleSizeScale:y,lineWidthScale:f,colorScale:x,tooltipDiv:b,sizeValueFormatter:v,xValueFormatter:F,yValueFormatter:S,xFieldType:C,yFieldType:$}){const w=e.append("g").attr("class","maces").selectAll("g").data(t).join("g").sort(((e,t)=>s.descending(e[a],t[a]))).attr("class",(e=>`mace\n        ${e.slope>=0?"mace-same":"mace-opposite"}\n        mace-${d(e[i])}\n        ${n.includes(e[i])?"mace-active":""}`)).on("click",(e=>{const t=s.select(e.target.parentNode),a=t.classed("mace-active");t.classed("mace-active",!a)}));w.append("path").attr("d",(e=>{const t=h({x1:m(e[r]),y1:p(e[g]),x2:m(e[c]),y2:p(e[u]),circleRadius:y(e[a]),stickWidth:f(e[a])});return s.lineRadial()(t)})).attr("transform",(e=>{const t=m(e[r]),a=p(e[g]),i=m(e[c]),n=p(e[u]),s=function({x1:e,y1:t,x2:a,y2:i}){const n=180*Math.atan((t-i)/(e-a))/Math.PI;return a-e>0?n-90:n+90}({x1:t,y1:a,x2:i,y2:n});return`translate(${i}, ${n}) rotate(${s})`})).attr("fill",(e=>x(e.slope))).attr("stroke-linecap","square"),w.on("mouseover",((e,t)=>{s.select(e.target.parentNode).classed("mace-hovered",!0),b.transition().duration(200).style("opacity",1);const n=l(t[a],v),d=l(t[r],F),m=l(t[c],F),p=l(t[g],S),h=l(t[u],S);b.html(`${t[i]}\n        <br/>\n        ${C}: ${d} → ${m}\n        <br />\n        ${$}: ${p} → ${h}\n        <br />\n        ${o.default.capitalize(a)}: ${n}\n        `),b.style("left",`${e.clientX}px`).style("top",`${e.clientY+20+window.scrollY}px`)})).on("mouseout",(e=>{s.select(e.target.parentNode).classed("mace-hovered",!1),b.style("left","-300px").transition().duration(500).style("opacity",0)}))}function y({data:e,options:{aspectRatio:t=2,marginTop:a=0,marginRight:i=0,marginBottom:n=0,marginLeft:r=0,bgColor:c="transparent",oppositeDirectionColor:p="#ee4e34",sameDirectionColor:g="#44a8c1",yAxisTitle:h="y axis title",xAxisTitle:y="x axis title",xValueFormatter:f="",yValueFormatter:x="",directionStartLabel:b="start point",directionEndLabel:v="end point",sizeLegendValues:F=[1e6,1e8,1e9],sizeLegendMoveSizeObjectDownBy:S=5,sizeLegendTitle:C="size legend title",sizeValueFormatter:$="",xAxisTickValues:w,xScaleType:k="linear",xScaleLogBase:L=10,defaultState:A=[],activeOpacity:z=.8,inactiveOpacity:B=.2,circleSizeRange:R=[5,30],lineWidthRange:T=[2,4],searchInputClassNames:N="",goToInitialStateButtonClassNames:D="",clearAllButtonClassNames:I="",xFieldType:E=`${O} → ${V}`,yFieldType:P=`${W} → ${G}`},dimensions:{xFieldStart:O,xFieldEnd:V,yFieldStart:W,yFieldEnd:G,sizeField:Y,nameField:H},chartContainerSelector:_}){!function({activeOpacity:e,inactiveOpacity:t}){s.select("body").append("style").html(`\n    g.maces .mace {\n      fill-opacity: ${t};\n    }\n    /* clicked and legend clicked states are common: controlled by .mace-active */\n    g.maces .mace.mace-active {\n      fill-opacity: ${e};\n    }\n    g.maces.searching .mace.mace-matched {\n      stroke: #333;\n      stroke-width: 3;\n    }\n    /* So that legend text is visible irrespective of state */\n    g.mace text {\n      fill-opacity: 0.8;\n    }\n    g.maces g.mace.mace-hovered {\n      stroke: #333;\n      stroke-width: 3;\n    }\n    g.color-legend g.mace-active {\n      fill-opacity: ${e};\n    }\n    g.color-legend g:not(.mace-active) {\n      fill-opacity: ${t};\n    }\n  `)}({activeOpacity:z,inactiveOpacity:B});const j=1e3,{svg:M,coreChartHeight:q,allComponents:X,chartCore:J,widgetsLeft:Q,widgetsRight:U}=function({chartContainerSelector:e,coreChartWidth:t,aspectRatio:a,marginTop:i,marginBottom:n,marginLeft:r,marginRight:o,bgColor:l}){const c=t/a,d=c+i+n,m=t+r+o,p=s.select(e),g=p.append("div").attr("style","display: flex; justify-content: space-between; padding-bottom: 0.5rem;"),h=g.append("div").attr("style","display: flex; align-items: end; column-gap: 5px;"),u=g.append("div").attr("style","display: flex; align-items: center; column-gap: 10px;"),y=p.append("svg").attr("viewBox",`0 0 ${m} ${d}`).style("background",l),f=y.append("g").attr("class","all-components"),x=f.append("g").attr("transform",`translate(${r}, ${i})`);return{svg:y,coreChartHeight:c,allComponents:f,chartCore:x,widgetsLeft:h,widgetsRight:u}}({chartContainerSelector:_,coreChartWidth:j,aspectRatio:t,marginTop:a,marginBottom:n,marginLeft:r,marginRight:i,bgColor:c}),K=s.select("body").append("div").attr("class","dom-tooltip").attr("style","opacity: 0; position: absolute; text-align: center; background-color: white; border-radius: 0.25rem; padding: 0.25rem 0.5rem; font-size: 0.75rem; line-height: 1rem; border-width: 1px;"),Z=function({data:e,xFieldStart:t,xFieldEnd:a,yFieldStart:i,yFieldEnd:n,sizeField:r}){return e.map((e=>{const s={...e};return s[t]=Number.parseFloat(e[t]),s[a]=Number.parseFloat(e[a]),s[i]=Number.parseFloat(e[i]),s[n]=Number.parseFloat(e[n]),s[r]=Number.parseFloat(e[r]),s.slope=(s[n]-s[i])/(s[a]-s[t]),s})).filter((e=>!Number.isNaN(e.slope)))}({data:e,xFieldStart:O,xFieldEnd:V,yFieldStart:W,yFieldEnd:G,sizeField:Y}),{yScale:ee,xScale:te,circleSizeScale:ae,lineWidthScale:ie,colorScale:ne}=function({dataParsed:e,coreChartHeight:t,coreChartWidth:a,yFieldStart:i,yFieldEnd:n,xFieldStart:r,xFieldEnd:o,xScaleType:l,xScaleLogBase:c,sizeField:d,circleSizeRange:m,lineWidthRange:p,sameDirectionColor:g,oppositeDirectionColor:h}){const u=e.map((e=>Number.parseFloat(e[i]))),y=e.map((e=>Number.parseFloat(e[n]))),f=s.extent([...u,...y]),x=s.scaleLinear().range([t,0]).domain(f).nice(),b=e.map((e=>Number.parseFloat(e[r]))),v=e.map((e=>Number.parseFloat(e[o]))),F=s.extent([...b,...v]),S="log"===l?s.scaleLog().base(c||10).range([0,a]).domain(F).nice():s.scaleLinear().range([0,a]).domain(F).nice(),C=s.max(e.map((e=>e[d])));return{yScale:x,xScale:S,circleSizeScale:s.scaleSqrt().range(m).domain([0,C]),lineWidthScale:s.scaleSqrt().range(p).domain([0,C]),colorScale:e=>e>0?g:h}}({dataParsed:Z,coreChartHeight:q,coreChartWidth:j,yFieldStart:W,yFieldEnd:G,xFieldStart:O,xFieldEnd:V,xScaleType:k,xScaleLogBase:L,sizeField:Y,circleSizeRange:R,lineWidthRange:T,sameDirectionColor:g,oppositeDirectionColor:p}),re=o.default(e).map(H).uniq().value(),se="All"===A?re:A;!function({gapInCircles:e,circleSizeScale:t,widgetsRight:a,sizeLegendMoveSizeObjectDownBy:i,sizeLegendValues:n,sizeValueFormatter:r,sizeLegendTitle:s}){const o=n.map((e=>t(e)));let c=0;const d=[];o.forEach(((e,t)=>{c+=0===t?e:o[t-1]+o[t],d.push(c)}));const m=a.append("svg"),p=m.append("g");p.append("g").attr("class","g-size-container").attr("transform",`translate(0, ${i})`).selectAll(".g-size-circle").data(o).enter().append("g").attr("class","g-size-circle").append("circle").attr("r",(e=>e)).style("fill","transparent").style("stroke-width",1).style("stroke","gray").attr("cx",((t,a)=>d[a]+a*e+1)).attr("cy",o[o.length-1]+1),p.selectAll(".g-size-circle").append("text").attr("alignment-baseline","middle").attr("dy",o[o.length-1]+2).attr("dx",((t,a)=>t+d[a]+(a+.1)*e)).style("font-size",8).text(((e,t)=>l(n[t],r))),p.append("text").attr("alignment-baseline","hanging").style("font-size",10).style("font-weight",600).text(s);const g=p.node().getBBox();m.attr("height",g.height).attr("width",g.width)}({gapInCircles:30,circleSizeScale:ae,widgetsRight:U,sizeLegendMoveSizeObjectDownBy:S,sizeLegendValues:F,sizeValueFormatter:$,sizeLegendTitle:C});!function({stickHeight:e,stickLength:t,ballRadius:a,gapForText:i,singleMaceSectionHeight:n,widgetsRight:r,sameDirectionColor:o,oppositeDirectionColor:l}){const c=r.append("svg"),d=c.append("g").attr("class","color-legend cursor-pointer").attr("transform",`translate(0, ${-(n-a)})`),m=d.append("g").attr("transform",`translate(0, ${n})`).attr("fill",o).attr("class","mace mace-same").on("click",(e=>{const t=s.select(e.target.parentNode).classed("mace-active");s.selectAll(".mace-same").classed("mace-active",!t)}));m.append("circle").attr("cx",a+t).attr("r",a),m.append("rect").attr("width",t).attr("height",e).attr("y",-e/2),m.append("text").text("Moving in the same direction").style("font-size",10).style("font-weight",600).attr("transform",`translate(${t+2*a+i}, 0)`).attr("alignment-baseline","middle");const p=d.append("g").attr("transform",`translate(0, ${2*n})`).attr("fill",l).attr("class","mace mace-opposite").on("click",(e=>{const t=s.select(e.target.parentNode).classed("mace-active");s.selectAll(".mace-opposite").classed("mace-active",!t)}));p.append("circle").attr("cx",a+t).attr("r",a),p.append("rect").attr("width",t).attr("height",e).attr("y",-e/2),p.append("text").text("Moving in the opposite direction").style("font-size",10).style("font-weight",600).attr("transform",`translate(${t+2*a+i}, 0)`).attr("alignment-baseline","middle");const g=d.node().getBBox();c.attr("height",g.height).attr("width",g.width)}({stickHeight:3,stickLength:30,ballRadius:6,gapForText:5,singleMaceSectionHeight:20,widgetsRight:U,sameDirectionColor:g,oppositeDirectionColor:p}),function({selection:e,circleRadius:t=5,stickLength:a=30,stickWidth:i=2,directionStartLabel:n="start",directionEndLabel:r="end",gapForText:s=5}){const o=e,l=o.append("g"),c=l.append("g").attr("fill","gray");c.append("circle").attr("cx",t+a).attr("r",t),c.append("rect").attr("width",a).attr("height",i).attr("y",-i/2);const d=c.append("text").text(n).attr("alignment-baseline","middle").attr("text-anchor","end").style("font-size",10).attr("transform",`translate(${-s}, 0)`);c.attr("transform",`translate(${d.node().getBBox().width+s}, ${t>d.node().getBBox().height/2?t:d.node().getBBox().height/2})`),c.append("text").text(r).attr("alignment-baseline","middle").attr("text-anchor","start").attr("transform",`translate(${a+2*t+s}, 0)`).style("font-size",10);const m=l.node().getBBox();o.attr("height",m.height).attr("width",m.width)}({selection:U.append("svg"),ballRadius:6,stickLength:30,stickWidthLegend:1,gapForText:5,directionStartLabel:b,directionEndLabel:v}),function({chartCore:e,coreChartHeight:t,coreChartWidth:a,xScale:i,xAxisTickValues:n,xAxisTitle:r}){const o=e.append("g").attr("class","x-axis-bottom").attr("transform",`translate(0, ${t+30})`);o.call(n?s.axisBottom(i).tickValues(n):s.axisBottom(i)),o.append("g").append("text").attr("class","text-xs font-semibold tracking-wider").text(r).attr("fill","#333").attr("text-anchor","middle").attr("transform",`translate(${a/2}, 30)`)}({chartCore:J,coreChartHeight:q,coreChartWidth:j,xScale:te,xAxisTickValues:w,xAxisTitle:y}),function({chartCore:e,coreChartWidth:t,yScale:a,yAxisTitle:i}){const n=e.append("g").attr("class","text-xs y-axis-right").attr("transform",`translate(${t}, 0)`);n.call(s.axisRight(a).ticks(5).tickSize(-t)).call((e=>e.selectAll(".tick line").attr("stroke-opacity",.2))).call((e=>e.select(".domain").remove())),n.append("g").append("text").attr("class","font-semibold tracking-wider").text(i).attr("fill","#333").attr("text-anchor","end").attr("transform","translate(8, -20)")}({chartCore:J,coreChartWidth:j,yScale:ee,yAxisTitle:h}),u({chartCore:J,dataParsed:Z,sizeField:Y,nameField:H,defaultStateAll:se,xFieldStart:O,xFieldEnd:V,xScale:te,yScale:ee,yFieldStart:W,yFieldEnd:G,circleSizeScale:ae,lineWidthScale:ie,colorScale:ne,tooltipDiv:K,sizeValueFormatter:$,xValueFormatter:f,yValueFormatter:x,xFieldType:E,yFieldType:P});const oe=(le=re,e=>{if(e){const t=e.toLowerCase();le.forEach((e=>{const a=d(e);e.toLowerCase().includes(t)?s.select(`.mace-${a}`).classed("mace-matched",!0):s.select(`.mace-${a}`).classed("mace-matched",!1),s.select(".maces").classed("searching",!0)}))}else le.forEach((e=>{const t=d(e);s.select(`.mace-${t}`).classed("mace-matched",!1)})),s.select(".maces").classed("searching",!1)});var le;const ce=function({handleSearch:e,widgetsLeft:t,searchInputClassNames:a,nameField:i}){const n=t.append("input").attr("type","text").attr("class",a);return n.attr("placeholder",`Find by ${i}`),n.on("keyup",(t=>{const a=t.target.value;e(a)})),n}({handleSearch:oe,widgetsLeft:Q,searchInputClassNames:N,nameField:H});!function({widgetsLeft:e,goToInitialStateButtonClassNames:t,defaultStateAll:a,search:i,handleSearch:n}){const r=e.append("button").text("Go to Initial State").attr("class",t);r.classed("hidden",!1),r.on("click",(()=>{s.selectAll(".mace").classed("mace-active",!1),o.default.forEach(a,(e=>{s.select(`.mace-${d(e)}`).classed("mace-active",!0)})),i.node().value="",n("")}))}({widgetsLeft:Q,goToInitialStateButtonClassNames:D,defaultStateAll:se,search:ce,handleSearch:oe}),function({widgetsLeft:e,clearAllButtonClassNames:t,search:a,handleSearch:i}){const n=e.append("button").text("Clear All").attr("class",t);n.classed("hidden",!1),n.on("click",(()=>{s.selectAll(".mace").classed("mace-active",!1),a.node().value="",i("")}))}({widgetsLeft:Q,clearAllButtonClassNames:I,search:ce,handleSearch:oe}),m({allComponents:X,svg:M,margins:{marginLeft:r,marginRight:i,marginTop:a,marginBottom:n}})}const f=({data:e,dimensionTypes:t,dimensions:a})=>{const i={};if(o.default.forEach(t,((t,n)=>{o.default.forEach(t,(t=>{const{valid:r,message:s}=t({data:e,dimensions:a,dim:n});if(!r){const e={validation:t.name,status:r,message:s};i[a[n]]?i[a[n]].push(e):i[a[n]]=[e]}}))})),o.default.isEmpty(i))return{valid:!0,message:""};let n="Data Validation Errors </br>";return o.default.mapKeys(i,((e,t)=>{const a=o.default.map(e,(e=>`</br>&nbsp;&nbsp;&nbsp;${e.validation} : row numbers - ${o.default.map(e.message,"rowNumber").join(", ")} | values - ${o.default.map(e.message,t).join(", ")}`)).join("");n+=`${t} : ${a}</br>`})),{valid:!1,message:n}},x=({data:e,dimensions:t,dim:a})=>{const i=o.default.filter(e,((e,i)=>(e.rowNumber=i+1,Number.isNaN(Number(e[t[a]])))));return o.default.isEmpty(i)?{valid:!0,message:""}:{valid:!1,message:i}},b=({data:e,dimensions:t,dim:a})=>{const i=o.default(e).countBy(t[a]).pickBy((e=>e>1)).keys().value(),n=o.default.filter(e,((e,n)=>(e.rowNumber=n+1,o.default.includes(i,e[t[a]]))));return o.default.isEmpty(i)?{valid:!0,message:""}:{valid:!1,message:n}},v=({data:e,dimensions:t,dim:a})=>{const i=o.default.filter(e,((e,i)=>(e.rowNumber=i+1,o.default.isEmpty(e[t[a]]))));return o.default.isEmpty(i)?{valid:!0,message:""}:{valid:!1,message:i}},F=({optionTypes:e,options:t})=>{const a=[];o.default.each(e,((e,i)=>{const n=e(t[i]);n.valid||void 0===t[i]||a.push({keyValue:`${i}: ${t[i]}`,message:n.message})}));const i={valid:!0,message:""};return a.forEach((e=>{e.valid||(i.message+=`&nbsp;&nbsp;&nbsp;${e.keyValue} - ${e.message}<br/>`,i.valid=!1)})),i.message=`Config option validation errors: <br/> ${i.message}`,i},S=e=>t=>e.includes(t)?{valid:!0}:{valid:!1,message:`Should be one of: ${e.join(", ")}`},C=e=>!Number.isNaN(Number(e))?{valid:!0}:{valid:!1,message:"Should be a valid number"},$=e=>"boolean"==typeof e?{valid:!0}:{valid:!1,message:"Should be true or false"},w=e=>t=>{const a=Math.min(...e),i=Math.max(...e),n=`Should be a number between ${a} and ${i}`;if(!C(t).valid)return{valid:!1,message:n};const r=Number(t);return r>=a&&r<=i?{valid:!0}:{valid:!1,message:n}},k=e=>{const t={valid:!0,message:""};if("transparent"===e)return t;const a=s.rgb(e);return o.default.forEach(a,(function(e){t.valid=t.valid&&!o.default.isNaN(e)})),t.valid||(t.message=`Invalid color: ${e}`),t},L=e=>t=>{const a=t.map((e=>k(e))),i={valid:!0,message:""};e&&t.length<e&&(i.valid=!1,i.message=`Need atleast ${e} colors`);const n=[...a,i],r={valid:!0,message:""};return n.forEach((e=>{e.valid||(r.message+=`<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;${e.message}`,r.valid=!1)})),r},A=e=>o.default.isArray(e)&&o.default.reduce(e,((e,t)=>e&&!Number.isNaN(Number(t))),!0)?{valid:!0}:{valid:!1,message:"Should be a valid array of numbers"},z=e=>o.default.isArray(e)||"All"===e?{valid:!0}:{valid:!1,message:'Should be a valid array or "All"'};function B({columns:e,dimensions:t}){if(o.default.isEmpty(t))return{valid:!1,message:"No dimensions provided."};const a={};o.default.each(t,((e,t)=>{o.default.isArray(e)?e.forEach(((e,i)=>{a[`${t}[${i}]`]=e})):a[t]=e}));const i={valid:!0,missingFields:[],message:""};return o.default.each(a,((t,a)=>{const n=o.default.includes(e,t);i.valid=i.valid&&n,n||i.missingFields.push(`{${a}: '${t}'}`)})),i.valid||(i.message=`These dimensions/columns are missing in the data: ${i.missingFields.join(", ")}`),i}function R(e,t){s.select(".config-error-display").remove(),o.default.isEmpty(t)||s.select(e).append("div").attr("class","text-red-500 config-error-display").html(`<p>Errors:</p>\n      <ul class="list-disc"><li>${t.join("</li><li>")}</li></ul>`)}const T={xFieldStart:[x],xFieldEnd:[x],yFieldStart:[x],yFieldEnd:[x],sizeField:[x],nameField:[v,b]},N={containerWidth:S(["max-w-screen-sm","max-w-screen-md","max-w-screen-lg","max-w-screen-xl","max-w-screen-2xl","max-w-full"]),aspectRatio:w([0,Number.POSITIVE_INFINITY]),marginTop:C,marginRight:C,marginBottom:C,marginLeft:C,bgColor:k,xAxisTickValues:A,xScaleType:S(["log","linear"]),xScaleLogBase:C,sizeLegendValues:A,sizeLegendMoveSizeObjectDownBy:C,oppositeDirectionColor:k,sameDirectionColor:k,defaultState:z,activeOpacity:w([0,1]),inactiveOpacity:w([0,1])},D=s;D.sankey=i.sankey,D.sankeyCenter=i.sankeyCenter,D.sankeyLeft=i.sankeyLeft,D.sankeyJustify=i.sankeyJustify,D.sankeyRight=i.sankeyRight;const I={justify:"sankeyJustify",left:"sankeyLeft",right:"sankeyRight",center:"sankeyCenter"};function E({data:e,options:{aspectRatio:t=2,marginTop:a=10,marginRight:i=0,marginBottom:n=10,marginLeft:r=50,bgColor:s="transparent",align:o="justify",verticalGapInNodes:l=10,nodeWidth:c=20,units:d="",format:p="",searchInputClassNames:g=""},dimensions:{sourceField:h,targetField:u,valueField:y},chartContainerSelector:f}){const x=(e,t)=>{const a=D.format(p);return t?`${a(e)} ${t}`:a(e)},b=I[o];D.select("body").append("style").html("\n    .sankey-nodes.hovering g:not(.active) * {\n      opacity: 0.1;\n    }\n    .sankey-links.hovering g:not(.active) {\n      opacity: 0.1;\n    }\n    \n    .sankey-nodes.searching:not(.hovering) g:not(.node-matched) {\n      opacity: 0.1;\n    }\n    .sankey-links.searching:not(.hovering) g:not(.node-matched) > path {\n      opacity: 0.1;\n    }");const v=1e3,F=v/t,S=F+a+n,C=v+r+i,$=D.select(f),w=$.append("div").attr("style","display: flex; justify-content: space-between; padding-bottom: 0.5rem;").append("div").attr("style","display: flex; align-items: end; column-gap: 5px;"),k=$.append("svg").attr("viewBox",`0 0 ${C} ${S}`).style("background",s),L=k.append("g").attr("class","all-components"),A=L.append("g").attr("transform",`translate(${r}, ${a})`),z=D.select("body").append("div").attr("class","dom-tooltip").attr("style","opacity: 0; position: absolute; text-align: center; background-color: white; border-radius: 0.25rem; padding: 0.25rem 0.5rem; font-size: 0.75rem; line-height: 1rem; border-width: 1px;"),B=D.scaleOrdinal(D.schemeCategory10),R=e.map((e=>({source:e[h],target:e[u],value:e[y]}))),T=[...new Set(R.flatMap((e=>[e.source,e.target])))].map((e=>({name:e,category:e.replace(/ .*/,"")}))),N=D.sankey().nodeId((e=>e.name)).nodeAlign(D[b]).nodeWidth(c).nodePadding(l).extent([[0,0],[v,F]])({nodes:T,links:R,units:d}),E=e=>B(void 0===e.category?e.name:e.category);function P(e,t){return e.source&&e.target?O(e,t):V(e,t)}function O(e,t="both"){let a=[e];return"source"!==t&&"both"!==t||(a=[...a,...V(e.source,"source")]),"target"!==t&&"both"!==t||(a=[...a,...V(e.target,"target")]),a}function V(e,t="both"){let a=[e];return"source"!==t&&"both"!==t||e.targetLinks.forEach((function(e){a=[...a,...O(e,t)]})),"target"!==t&&"both"!==t||e.sourceLinks.forEach((function(e){a=[...a,...O(e,t)]})),a}const W=A.append("g").attr("class","sankey-links").attr("fill","none").attr("stroke-opacity",.5).selectAll("g").data(N.links).join("g").attr("class","sankey-link").attr("id",(e=>`iv-link-${e.index}`)).style("mix-blend-mode","multiply").on("mouseover",((e,t)=>{const a=[t];a.forEach((function(e){P(e).forEach((function(e){a.push(e)}))})),D.select(".sankey-nodes").classed("hovering",!0),D.select(".sankey-links").classed("hovering",!0),a.forEach((e=>{e.source&&e.target?D.select(`#iv-link-${e.index}`).classed("active",!0):D.select(`#iv-node-${e.index}`).classed("active",!0)})),z.transition().duration(200).style("opacity",1),z.html(`${t.source.name} → ${t.target.name}<br />${x(t.value,d)} `),z.style("left",`${e.clientX}px`).style("top",`${e.clientY+20+window.scrollY}px`)})).on("mouseout",((e,t)=>{const a=[t];a.forEach((function(e){P(e).forEach((function(e){a.push(e)}))})),D.select(".sankey-nodes").classed("hovering",!1),D.select(".sankey-links").classed("hovering",!1),a.forEach((e=>{e.source&&e.target?D.select(`#iv-link-${e.index}`).classed("active",!1):D.select(`#iv-node-${e.index}`).classed("active",!1)})),z.style("left","-300px").transition().duration(500).style("opacity",0)}));{const e=W.append("linearGradient").attr("id",(e=>`iv-link-gradient-${e.index}`));e.append("stop").attr("offset","0%").attr("stop-color",(e=>E(e.source))),e.append("stop").attr("offset","100%").attr("stop-color",(e=>E(e.target)))}W.append("path").attr("d",D.sankeyLinkHorizontal()).attr("stroke",(e=>`url(#iv-link-gradient-${e.index})`)).attr("stroke-width",(e=>Math.max(1,e.width))).attr("stroke-opacity",.5);const G=A.append("g").attr("class","sankey-nodes").selectAll("g").data(N.nodes).join("g").attr("class","sankey-node").attr("id",(e=>`iv-node-${e.index}`));G.append("rect").attr("x",(e=>e.x0)).attr("y",(e=>e.y0)).attr("height",(e=>e.y1-e.y0)).attr("width",(e=>e.x1-e.x0)).attr("fill",(e=>E(e))).on("mouseover",((e,t)=>{const a=[t];a.forEach((function(e){P(e).forEach((function(e){a.push(e)}))})),D.select(".sankey-nodes").classed("hovering",!0),D.select(".sankey-links").classed("hovering",!0),a.forEach((e=>{e.source&&e.target?D.select(`#iv-link-${e.index}`).classed("active",!0):D.select(`#iv-node-${e.index}`).classed("active",!0)})),z.transition().duration(200).style("opacity",1),z.html(`${t.name}<br />${x(t.value,d)}`),z.style("left",`${e.clientX}px`).style("top",`${e.clientY+20+window.scrollY}px`)})).on("mouseout",((e,t)=>{const a=[t];a.forEach((function(e){P(e).forEach((function(e){a.push(e)}))})),D.select(".sankey-nodes").classed("hovering",!1),D.select(".sankey-links").classed("hovering",!1),a.forEach((e=>{e.source&&e.target?D.select(`#iv-link-${e.index}`).classed("active",!1):D.select(`#iv-node-${e.index}`).classed("active",!1)})),z.style("left","-300px").transition().duration(500).style("opacity",0)})),G.append("text").text((e=>e.name)).attr("font-family","sans-serif").attr("font-size",10).attr("x",(e=>e.x0<500?e.x1+6:e.x0-6)).attr("y",(e=>(e.y1+e.y0)/2)).attr("dy","0.35em").attr("text-anchor",(e=>e.x0<500?"start":"end"));const Y=w.append("input").attr("type","text").attr("class",g);Y.attr("placeholder","Find by node"),Y.on("keyup",(e=>{const t=e.target.value;if(t){D.selectAll(".sankey-link").classed("node-matched",!1),D.selectAll(".sankey-node").classed("node-matched",!1);const e=t.toLowerCase(),a=[];N.nodes.forEach((t=>{const{name:i}=t;i.toLowerCase().includes(e)&&a.push(t)})),a.forEach((function(e){P(e).forEach((function(e){a.find((t=>(t.source&&t.target&&e.source&&e.target||!!(t.sourceLinks&&t.targetLinks&&e.sourceLinks&&e.targetLinks))&&t.index===e.index))||a.push(e)}))})),a.forEach((e=>{e.source&&e.target?D.select(`#iv-link-${e.index}`).classed("node-matched",!0):D.select(`#iv-node-${e.index}`).classed("node-matched",!0)})),D.select(".sankey-nodes").classed("searching",!0),D.select(".sankey-links").classed("searching",!0)}else N.nodes.forEach((e=>{const{index:t}=e;D.select(`#iv-node-${t}`).classed("node-matched",!1)})),D.select(".sankey-nodes").classed("searching",!1),D.select(".sankey-links").classed("searching",!1)})),m({allComponents:L,svg:k,margins:{marginLeft:r,marginRight:i,marginTop:a,marginBottom:n}})}const P={sourceField:[v],targetField:[v],valueField:[x]},O={aspectRatio:w([.01,Number.POSITIVE_INFINITY]),marginTop:C,marginRight:C,marginBottom:C,marginLeft:C,bgColor:k,align:S(["justify","left","right","center"]),verticalGapInNodes:C,nodeWidth:C};function V({color:e,title:t,tickSize:a=6,width:i=320,height:n=44+a,marginTop:r=18,marginRight:o=0,marginBottom:l=16+a,marginLeft:c=0,ticks:d=i/64,removeTicks:m=!1,tickFormat:p,tickValues:g}={}){const h=s.create("svg").attr("width",i).attr("height",n).attr("viewBox",[0,0,i,n]).style("overflow","visible").style("display","block");let u,y=e=>e.selectAll(".tick line").attr("y1",r+l-n);if(e.interpolate){const t=Math.min(e.domain().length,e.range().length);u=e.copy().rangeRound(s.quantize(s.interpolate(c,i-o),t)),h.append("image").attr("x",c).attr("y",r).attr("width",i-c-o).attr("height",n-r-l).attr("preserveAspectRatio","none").attr("xlink:href",W(e.copy().domain(s.quantize(s.interpolate(0,1),t))).toDataURL())}else if(e.interpolator){if(u=Object.assign(e.copy().interpolator(s.interpolateRound(c,i-o)),{range:()=>[c,i-o]}),h.append("image").attr("x",c).attr("y",r).attr("width",i-c-o).attr("height",n-r-l).attr("preserveAspectRatio","none").attr("xlink:href",W(e.interpolator()).toDataURL()),!u.ticks){if(void 0===g){const t=Math.round(d+1);g=s.range(t).map((a=>s.quantile(e.domain(),a/(t-1))))}"function"!=typeof p&&(p=s.format(void 0===p?",f":p))}}else if(e.invertExtent){const t=e.thresholds?e.thresholds():e.quantiles?e.quantiles():e.domain(),a=void 0===p?e=>e:"string"==typeof p?s.format(p):p;u=s.scaleLinear().domain([-1,e.range().length-1]).rangeRound([c,i-o]),h.append("g").selectAll("rect").data(e.range()).join("rect").attr("x",((e,t)=>u(t-1))).attr("y",r).attr("width",((e,t)=>u(t)-u(t-1))).attr("height",n-r-l).attr("fill",(e=>e)),g=s.range(t.length),p=e=>a(t[e],e)}else u=s.scaleBand().domain(e.domain()).rangeRound([c,i-o]),h.append("g").selectAll("rect").data(e.domain()).join("rect").attr("x",u).attr("y",r).attr("width",Math.max(0,u.bandwidth()-1)).attr("height",n-r-l).attr("fill",e),y=()=>{};return h.append("g").attr("transform",`translate(0,${n-l})`).call(s.axisBottom(u).ticks(d,"string"==typeof p?p:void 0).tickFormat("function"==typeof p?p:void 0).tickSize(a).tickValues(g)).call(y).call((e=>e.select(".domain").remove())).call((e=>m?e.selectAll(".tick").remove():null)).call((e=>e.append("text").attr("x",c).attr("y",r+l-n-6).attr("fill","currentColor").attr("text-anchor","start").attr("class","font-sans").attr("style","font-weight: 600;").text(t))),h.node()}function W(e,t=256){var a=document.createElement("canvas");a.width=t,a.height=1;const i=a.getContext("2d");for(let a=0;a<t;++a)i.fillStyle=e(a/(t-1)),i.fillRect(a,0,1,1);return a}function G(e){return`&#${e.charCodeAt(0).toString()};`}function Y({data:e,dimensions:{sizeField:t,xField:a,nameField:i,segmentField:n},options:{aspectRatioCombined:r=5,aspectRatioSplit:o=.8,marginTop:c=60,marginRight:d=90,marginBottom:m=20,marginLeft:g=50,bgColor:h="transparent",customColorScheme:u,inbuiltScheme:y="schemeOrRd",numberOfColors:f=5,collisionDistance:x=.5,xDomainCustom:b,xAxisLabel:v=a,xValuePrefix:F="",xValueFormatter:S="",xValueSuffix:C="",sizeRange:$=[2,20],sizeValuePrefix:w="",sizeValueFormatter:k="",sizeValueSuffix:L="",sizeLegendValues:A,sizeLegendTitle:z=t,sizeLegendGapInCircles:B=30,colorLegendTitle:R=a,combinedSegmentLabel:T="All",segmentType:N=n,segmentTypeCombined:D="",segmentTypeSplit:I="",splitButtonClassNames:E="",combinedButtonClassNames:P="",searchInputClassNames:O=""},chartContainerSelector:W}){s.select("body").append("style").html("\n    .g-searching circle.c-match {\n      stroke-width: 2;\n      stroke: #333;\n    }\n    circle.hovered {\n      stroke-width: 2;\n      stroke: #333;\n    }\n  ");const G=1e3,Y=G/r,H=G/o,_=Y+c+m,j=H+c+m,M=G+g+d,q=s.select(W),X=q.append("div").attr("style","display: flex; justify-content: space-between; padding-bottom: 0.5rem;"),J=X.append("div").attr("style","display: flex; align-items: end; column-gap: 5px;"),Q=X.append("div").attr("style","display: flex; align-items: center; column-gap: 10px;"),U=q.append("svg").attr("viewBox",`0 0 ${M} ${_}`).style("background",h),K=U.append("g").attr("class","all-components"),Z=K.append("g").attr("transform",`translate(${g}, ${c})`),ee=s.select("body").append("div").attr("class","dom-tooltip").attr("style","opacity: 0; position: absolute;  background-color: white; border-radius: 0.25rem; padding: 0.25rem 0.5rem; font-size: 0.75rem; line-height: 1rem; border-width: 1px;"),te=e.map((e=>({...e,[t]:Number.parseFloat(e[t]),[a]:Number.parseFloat(e[a])}))),ae=J.append("button").text("Split").attr("class",E),ie=J.append("button").text("Combine").attr("class",P);let ne=!1,re=!1;function se(){ne?(ae.node().disabled=!1,ae.attr("title",null)):(ae.node().disabled=!0,ae.attr("title","Combined force simulation is either in progress or current configuration is already split")),re?(ie.node().disabled=!1,ie.attr("title",null)):(ie.node().disabled=!0,ie.attr("title","Split force simulation is either in progress or current configuration is already combined"))}se();const oe=[...new Set(te.map((e=>e[n])))],le=Math.max(...te.map((e=>e[t]))),ce=s.scaleSqrt().range($).domain([0,le]),de=s.scalePoint().domain(oe).range([0,H]).padding(.5),me=te.map((e=>e[a])).sort(),pe=s.extent(me),ge=b||pe,he=s.scaleLinear().domain(ge).range([0,G]),ue=s.scaleQuantize().domain(ge).range(u||s[y][f]).nice();Q.append("svg").attr("width",260).attr("height",45).append((()=>V({color:ue,title:R,width:260})));const ye=A.map((e=>ce(e)));let fe=0;const xe=[];ye.forEach(((e,t)=>{fe+=0===t?e:ye[t-1]+ye[t],xe.push(fe)}));const be=Q.append("svg"),ve=be.append("g");ve.append("g").attr("class","g-size-container").attr("transform","translate(0, 5)").selectAll(".g-size-circle").data(ye).enter().append("g").attr("class","g-size-circle").append("circle").attr("r",(e=>e)).style("fill","#bebebe").style("stroke-width",1).style("stroke","gray").attr("cx",((e,t)=>xe[t]+t*B+1)).attr("cy",ye[ye.length-1]+1),ve.selectAll(".g-size-circle").append("text").attr("alignment-baseline","middle").attr("dy",ye[ye.length-1]+2).attr("dx",((e,t)=>e+xe[t]+(t+.1)*B)).style("font-size",8).text(((e,t)=>w+l(A[t],k)+L)),ve.append("text").attr("alignment-baseline","hanging").style("font-size",10).style("font-weight",600).text(z);const Fe=ve.node().getBBox();be.attr("height",Fe.height).attr("width",Fe.width),Z.append("g").attr("transform","translate(500, -20)").append("text").attr("class","text-xs font-semibold tracking-wider").text(v).attr("text-anchor","middle");const Se=Z.append("g").attr("id","x-axis");const Ce=Z.append("g").attr("transform","translate(-23, -20)").append("text").attr("class","text-xs font-semibold ").text(N).attr("text-anchor","end");const $e=s.scaleBand().domain([T]).range([0,Y]);const we=Z.append("g").attr("class","bubbles");let ke;function Le(){const e=we.selectAll("circle").data(te);ke=e.enter().append("circle").attr("r",(e=>ce(e[t]))).style("fill",(function(e){return ue(e[a])})).attr("stroke",(function(e){return s.rgb(ue(e[a])).darker(.5)})).merge(e).attr("cx",(function(e){return e.x})).attr("cy",(function(e){return e.y})).on("mouseover",(function(e,r){ee.transition().duration(200).style("opacity",1),ee.html(`<div><span>${r[i]}</span>(${r[n]})</div>\n         <div style="display: flex">\n           <div style="text-transform: capitalize">${a}:</div>\n           <div style="padding-left: 0.25rem; font-weight: bold">${F+l(r[a],S)+C}</div>\n         </div>\n         <div style="display: flex">\n           <div style="text-transform: capitalize">${t}:</div>\n           <div style="padding-left: 0.25rem; font-weight: bold">${w+l(r[t],k)+L}</div>\n         </div>`),ee.style("left",`${e.clientX}px`).style("top",`${e.clientY+window.scrollY+30}px`),s.select(this).classed("hovered",!0)})).on("mouseout",(function(){ee.transition().duration(500).style("opacity",0),s.select(this).classed("hovered",!1)})),e.exit().remove(),p({allComponents:K,svg:U,margins:{marginLeft:g,marginRight:d,marginTop:c,marginBottom:m}})}const Ae=J.append("input").attr("type","text").attr("class",O);function ze(){re=!1,se(),Se.call(s.axisTop(he).tickSize(-Y).tickFormat((e=>F+l(e,S)+C))).call((e=>e.selectAll(".tick line").attr("stroke-opacity",.1))).call((e=>e.select(".domain").remove())),s.select("#y-axis-split").remove(),Z.append("g").attr("id","y-axis-combined").call(s.axisLeft($e).tickSize(-1e3)).call((e=>e.select(".domain").remove())).call((e=>{e.selectAll(".tick line").attr("stroke-opacity",.1),e.selectAll(".tick text").attr("transform","translate(-20,0)").classed("text-xs",!0)})).attr("opacity",0).transition().duration(1e3).attr("opacity",1),Ce.text(D),U.attr("viewBox",`0 0 ${M} ${_}`),we.attr("transform",`translate(0, ${Y/2})`),we.raise(),s.forceSimulation(te).force("charge",s.forceManyBody().strength(1)).force("x",s.forceX().x((e=>he(e[a]))).strength(1)).force("y",s.forceY().y(0)).force("collision",s.forceCollide().radius((function(e){return ce(e[t])+x}))).on("tick",Le).on("end",(()=>{console.log("combined force simulation ended"),ne=!0,se()}))}Ae.attr("placeholder",`Find by ${i}`),Ae.on("keyup",(e=>{var t;(t=e.target.value.trim())?(s.select(".bubbles").classed("g-searching",!0),ke.classed("c-match",(e=>e[i].toLowerCase().includes(t.toLowerCase())))):s.select(".bubbles").classed("g-searching",!1)})),ae.on("click",(function(){ne=!1,se(),Se.call(s.axisTop(he).tickSize(-H).tickFormat((e=>F+l(e,S)+C))).call((e=>e.selectAll(".tick line").attr("stroke-opacity",.1))).call((e=>e.select(".domain").remove())),s.select("#y-axis-combined").remove(),Z.append("g").attr("id","y-axis-split").call(s.axisLeft(de).tickSize(-1e3)).call((e=>e.select(".domain").remove())).call((e=>{e.selectAll(".tick line").attr("stroke-opacity",.1),e.selectAll(".tick text").attr("transform","translate(-20,0)").classed("text-xs",!0)})).attr("opacity",0).transition().duration(1e3).attr("opacity",1),Ce.text(I),U.attr("viewBox",`0 0 ${M} ${j}`),we.attr("transform","translate(0, 0)"),we.raise(),s.forceSimulation(te).force("charge",s.forceManyBody().strength(1)).force("x",s.forceX().x((function(e){return he(e[a])})).strength(1)).force("y",s.forceY().y((function(e){return de(e[n])})).strength(1.2)).force("collision",s.forceCollide().radius((function(e){return ce(e[t])+x}))).on("tick",Le).on("end",(()=>{console.log("split force simulation ended"),re=!0,se()}))})),ie.on("click",ze),ze()}const H=["schemeBrBG","schemePRGn","schemePiYG","schemePuOr","schemeRdBu","schemeRdGy","schemeRdYlBu","schemeRdYlGn","schemeSpectral","schemeBuGn","schemeBuPu","schemeGnBu","schemeOrRd","schemePuBuGn","schemePuBu","schemePuRd","schemeRdPu","schemeYlGnBu","schemeYlGn","schemeYlOrBr","schemeYlOrRd","schemeBlues","schemeGreens","schemeGreys","schemePurples","schemeReds","schemeOranges"],_={sizeField:[x],xField:[x],nameField:[v],segmentField:[v]},j={aspectRatioCombined:w([.01,Number.MAX_SAFE_INTEGER]),aspectRatioSplit:w([.01,Number.MAX_SAFE_INTEGER]),marginTop:C,marginRight:C,marginBottom:C,marginLeft:C,bgColor:k,customColorScheme:L,inbuiltScheme:S(H),numberOfColors:w([3,9]),collisionDistance:w([0,Number.MAX_SAFE_INTEGER]),xDomainCustom:A,sizeRange:A,sizeLegendValues:A,sizeLegendGapInCircles:C};function M({data:e,options:{aspectRatio:t=2,marginTop:a=60,marginRight:i=90,marginBottom:n=20,marginLeft:r=50,bgColor:l="transparent",xPaddingOuter:c=.2,xAxisLabel:p=$,dominoSize:g=.2,yPaddingInner:h=.2,yPaddingOuter:u=.2,ySortOrder:y="desc",colorStrategy:f="value",colorThreshold:x=10,colorDominoHighlighted:b="#c20a66",colorDominoNormal:v="#d9e2e4",normalLegendLabel:F="Normal",highlightedLegendLabel:S="Highlighted",searchInputClassNames:C=""},dimensions:{xField:$,yField:w,dominoField:k,colorField:L},chartContainerSelector:A}){s.select("body").append("style").html("\n  rect.domino.domino-hovered {\n    stroke: #333;\n  }\n  g.dominos.searching g rect.domino-matched {\n    stroke: #333;\n  }\n  ");const z=1e3,{svg:B,coreChartHeight:R,allComponents:T,chartCore:N,widgetsLeft:D,widgetsRight:I}=function({chartContainerSelector:e,coreChartWidth:t,aspectRatio:a,marginTop:i,marginBottom:n,marginLeft:r,marginRight:o,bgColor:l}){const c=t/a,d=c+i+n,m=t+r+o,p=s.select(e),g=p.append("div").attr("style","display: flex; justify-content: space-between; padding-bottom: 0.5rem;"),h=g.append("div").attr("style","display: flex; align-items: end; column-gap: 5px;"),u=g.append("div").attr("style","display: flex; align-items: center; column-gap: 10px;"),y=p.append("svg").attr("viewBox",`0 0 ${m} ${d}`).style("background",l),f=y.append("g").attr("class","all-components"),x=f.append("g").attr("transform",`translate(${r}, ${i})`);return{svg:y,coreChartHeight:c,allComponents:f,chartCore:x,widgetsLeft:h,widgetsRight:u}}({chartContainerSelector:A,coreChartWidth:z,aspectRatio:t,marginTop:a,marginBottom:n,marginLeft:r,marginRight:i,bgColor:l}),E=s.select("body").append("div").attr("class","dom-tooltip").attr("style","opacity: 0; position: absolute; text-align: center; background-color: white; border-radius: 0.25rem; padding: 0.25rem 0.5rem; font-size: 0.75rem; line-height: 1rem; border-width: 1px;"),P=function({data:e,colorField:t,yField:a}){let i=e.map((e=>{const a={...e};return a[t]=Number.parseFloat(e[t]),a}));return i=o.default(i).groupBy(a).map((e=>{e.forEach(((e,t)=>{e.__idx__=t}));const a=o.default.orderBy(e,t,"desc");return a.forEach(((e,t)=>{e.__rank__=t})),o.default.orderBy(a,"__idx__","asc")})).value().flat(),i}({data:e,colorField:L,yField:w}),{xScale:O,yScale:V,colorScale:W}=function({dataParsed:e,xField:t,yField:a,dominoSize:i,coreChartWidth:n,coreChartHeight:r,xPaddingOuter:l,ySortOrder:c,yPaddingOuter:d,yPaddingInner:m,colorStrategy:p,colorThreshold:g,colorDominoNormal:h,colorDominoHighlighted:u}){const y=o.default(e).map(t).uniq().value(),f=1-i,x=s.scaleBand().domain(y).range([0,n]).paddingInner(f).paddingOuter(l),b=o.default(e).orderBy([a],[c]).map(a).uniq().value();return{xScale:x,yScale:s.scaleBand().domain(b).range([0,r]).paddingInner(m).paddingOuter(d),colorScale:"value"===p?e=>e>=g?u:h:e=>e>=g?h:u}}({dataParsed:P,xField:$,yField:w,dominoSize:g,coreChartWidth:z,coreChartHeight:R,xPaddingOuter:c,ySortOrder:y,yPaddingOuter:u,yPaddingInner:h,colorThreshold:x,colorDominoNormal:v,colorDominoHighlighted:b,colorStrategy:f});!function({chartCore:e,yScale:t}){e.append("g").attr("class","y-axis-left").call(s.axisLeft(t).tickSize(0)).call((e=>e.select(".domain").remove()))}({chartCore:N,yScale:V}),function({dataParsed:e,yField:t,chartCore:a,yScale:i,dominoField:n,xScale:r,xField:o,colorScale:l,colorField:c,colorStrategy:m,tooltipDiv:p}){const g=s.groups(e,(e=>e[t])).map((([e,a])=>({[t]:e,values:a})));a.append("g").attr("class","dominos").selectAll("g").data(g).join("g").attr("id",(e=>`${t}-${e[t]}`)).attr("transform",(e=>`translate(0, ${i(e[t])})`)).selectAll("rect").data((e=>e.values)).join("rect").attr("class",(e=>`domino domino-${d(e[n])}`)).attr("width",r.bandwidth()).attr("height",i.bandwidth()).attr("x",(e=>r(e[o]))).attr("y",0).attr("fill",(e=>l("value"===m?e[c]:e.__rank__))).on("mouseover",((e,t)=>{s.select(e.target).classed("domino-hovered",!0),p.transition().duration(200).style("opacity",1),p.html(`${t[n]}, Pick # ${t[o]}`),p.style("left",`${e.clientX}px`).style("top",`${e.clientY+20+window.scrollY}px`)})).on("mouseout",(e=>{s.select(e.target).classed("domino-hovered",!1),p.style("left","-300px").transition().duration(500).style("opacity",0)}))}({dataParsed:P,yField:w,chartCore:N,yScale:V,dominoField:k,xScale:O,xField:$,colorScale:W,colorField:L,colorStrategy:f,tooltipDiv:E}),function({chartCore:e,xAxisLabel:t,coreChartWidth:a}){e.append("text").text(t).attr("transform",`translate(${a/2}, 0)`).attr("text-anchor","middle").attr("font-size",12)}({chartCore:N,xAxisLabel:p,coreChartWidth:z});const G=o.default(P).map(k).uniq().value();var Y;!function({handleSearch:e,widgetsLeft:t,searchInputClassNames:a,dominoField:i}){const n=t.append("input").attr("type","text").attr("class",a);n.attr("placeholder",`Find by ${i}`),n.on("keyup",(t=>{const a=t.target.value;e(a)}))}({handleSearch:(Y=G,e=>{if(e){const t=e.toLowerCase();Y.forEach((e=>{const a=d(e);e.toLowerCase().includes(t)?s.select(`.domino-${a}`).classed("domino-matched",!0):s.select(`.domino-${a}`).classed("domino-matched",!1),s.select(".dominos").classed("searching",!0)}))}else Y.forEach((e=>{const t=d(e);s.select(`.domino-${t}`).classed("domino-matched",!1)})),s.select(".dominos").classed("searching",!1)}),widgetsLeft:D,searchInputClassNames:C,dominoField:k}),function({xScale:e,yScale:t,widgetsRight:a,colorDominoHighlighted:i,highlightedLegendLabel:n,colorDominoNormal:r,normalLegendLabel:s}){const o=a.append("svg"),l=o.append("g"),c=e.bandwidth(),d=t.bandwidth(),m=l.append("g");m.append("rect").attr("x",0).attr("y",0).attr("width",c).attr("height",d).attr("fill",i),m.append("text").attr("x",c+5).attr("y",d/2).attr("font-size",12).attr("dominant-baseline","middle").text(n);const p=m.node().getBBox().width,g=l.append("g").attr("transform",`translate(${p+20}, 0)`);g.append("rect").attr("x",0).attr("y",0).attr("width",c).attr("height",d).attr("fill",r),g.append("text").attr("x",c+5).attr("y",d/2).attr("font-size",12).attr("dominant-baseline","middle").text(s);const h=l.node().getBBox();o.attr("width",h.width).attr("height",h.height)}({xScale:O,yScale:V,widgetsRight:I,colorDominoHighlighted:b,highlightedLegendLabel:S,colorDominoNormal:v,normalLegendLabel:F}),m({allComponents:T,svg:B,margins:{marginLeft:r,marginRight:i,marginTop:a,marginBottom:n}})}const q={xField:[v],yField:[v],colorField:[x],dominoField:[v]},X={aspectRatio:w([0,Number.POSITIVE_INFINITY]),marginTop:C,marginRight:C,marginBottom:C,marginLeft:C,bgColor:k,xPaddingOuter:w([0,1]),yPaddingInner:w([0,1]),yPaddingOuter:w([0,1]),ySortOrder:S(["asc","desc"]),colorStrategy:S(["rank","value"]),colorThreshold:C,colorDominoHighlighted:k,colorDominoNormal:k,dominoSize:w([0,1])};const J=(e,t)=>s.timeParse(t)(e);function Q({data:e,options:{aspectRatio:t=.8,marginTop:a=0,marginRight:i=0,marginBottom:n=0,marginLeft:r=0,bgColor:c="#eee",xAxisTitle:p="",xAxisDateParser:g="",xAxisDateFormatter:h="",xTooltipFormatter:u="%B %d, %Y",overlap:y=1,yValueFormatter:f="",yValuePrefix:x="",yValuePostfix:b="",seriesLabelPosition:v="left",colorRange:F=s.schemeTableau10,defaultState:S=[],activeOpacity:C=.8,inactiveOpacity:$=.2,searchInputClassNames:w="",goToInitialStateButtonClassNames:k="",clearAllButtonClassNames:L="",showAllButtonClassNames:A=""},dimensions:{seriesField:z,xField:B,yField:R,colorField:T},chartContainerSelector:N}){!function({activeOpacity:e,inactiveOpacity:t}){s.select("body").append("style").html(`\ng.serieses .series {\n  fill-opacity: ${t};\n}\n/* clicked and legend clicked states are common: controlled by .mace-active */\ng.serieses .series.series-active {\n  fill-opacity: ${e};\n}\ng.serieses.searching .series.series-matched .top-line {\n  fill-opacity: ${e};\n  stroke: #000;\n  stroke-width: 3;\n}\n/* So that legend text is visible irrespective of state */\ng.series text {\n  fill-opacity: ${e};\n}\ng.serieses g.series.series-matched text {\n  font-weight: bolder;\n}\ng.serieses g.series.series-hovered .top-line {\n  stroke-width: 3;\n}\ng.circles circle.circle {\n  r: 2;\n  fill-opacity: 0.1;\n}\ng.circles circle.circle.circle-hovered {\n  r: 5;\n  fill-opacity: ${e};\n}\n`)}({activeOpacity:C,inactiveOpacity:$});const D=1e3,{svg:I,coreChartHeight:E,allComponents:P,chartCore:O,widgetsLeft:V,viewBoxWidth:W}=function({chartContainerSelector:e,coreChartWidth:t,aspectRatio:a,marginTop:i,marginBottom:n,marginLeft:r,marginRight:o,bgColor:l}){const c=t/a,d=c+i+n,m=t+r+o,p=s.select(e),g=p.append("div").attr("style","display: flex; justify-content: space-between; padding-bottom: 0.5rem;"),h=g.append("div").attr("style","display: flex; align-items: end; column-gap: 5px;"),u=g.append("div").attr("style","display: flex; align-items: center; column-gap: 10px;"),y=p.append("svg").attr("viewBox",`0 0 ${m} ${d}`).style("background",l),f=y.append("g").attr("class","all-components"),x=f.append("g").attr("transform",`translate(${r}, ${i})`);return{svg:y,coreChartHeight:c,allComponents:f,chartCore:x,widgetsLeft:h,widgetsRight:u,viewBoxWidth:m}}({chartContainerSelector:N,coreChartWidth:D,aspectRatio:t,marginTop:a,marginBottom:n,marginLeft:r,marginRight:i,bgColor:c}),G=s.select("body").append("div").attr("class","dom-tooltip").attr("style","opacity: 0; position: absolute; text-align: center; background-color: white; border-radius: 0.25rem; padding: 0.25rem 0.5rem; font-size: 0.75rem; line-height: 1rem; border-width: 1px;"),{parsedData:Y,nestedData:H}=function({data:e,yField:t,xField:a,seriesField:i,colorField:n}){const r=e.map((e=>({...e,[t]:Number.parseFloat(e[t])})));return r.sort(((e,t)=>e[a]-t[a])),{parsedData:r,nestedData:s.groups(r,(e=>e[i])).map((([e,t])=>({[i]:e,values:t,[n]:t[0][n]})))}}({data:e,yField:R,xField:B,seriesField:z,colorField:T}),{yScale:_,xScale:j,categoryScale:M,categoryDomain:q,fillColorScale:X}=function({parsedData:e,nestedData:t,xField:a,yField:i,seriesField:n,coreChartWidth:r,coreChartHeight:l,overlap:c,xAxisDateParser:d,colorField:m,colorRange:p}){const g=s.extent(o.default.chain(e).map(a).uniq().value().map((e=>J(e,d)))),h=s.scaleTime([0,r]).domain(g),u=t.map((e=>e[n])),y=s.scaleBand().range([0,l]).domain(u).paddingInner(0).paddingOuter(0),f=s.extent(e,(e=>e[i])),x=s.scaleLinear().range([0,-(1+c)*y.step()]).domain(f),b=o.default.chain(e).map(m).uniq().value();return{yScale:x,xScale:h,categoryScale:y,categoryDomain:u,fillColorScale:s.scaleOrdinal().range(p).domain(b)}}({parsedData:Y,nestedData:H,xField:B,yField:R,seriesField:z,coreChartWidth:D,coreChartHeight:E,overlap:y,xAxisDateParser:g,colorField:T,colorRange:F}),Q="All"===S?q:S;!function({chartCore:e,coreChartHeight:t,xScale:a,xAxisDateFormatter:i,xAxisTitle:n,coreChartWidth:r}){const o=e.append("g").attr("class","x-axis-bottom").attr("transform",`translate(0, ${t+10})`);o.call(s.axisBottom(a).tickFormat((e=>s.timeFormat(i)(e)))),o.append("g").append("text").attr("class","text-xs font-semibold tracking-wider").text(n).attr("fill","#333").attr("text-anchor","middle").attr("transform",`translate(${r/2}, 30)`)}({chartCore:O,coreChartHeight:E,xScale:j,xAxisDateFormatter:h,xAxisTitle:p,coreChartWidth:D}),function({chartCore:e,nestedData:t,seriesField:a,defaultStateAll:i,categoryScale:n,xField:r,yField:o,xAxisDateParser:c,xScale:m,yScale:p,fillColorScale:g,colorField:h,tooltipDiv:u,xTooltipFormatter:y,yValuePrefix:f,yValuePostfix:x,yValueFormatter:b,seriesLabelPosition:v,viewBoxWidth:F}){const S=e.append("g").attr("class","serieses").selectAll(".series").data(t).join("g").attr("class",(e=>`series \n    series-${d(e[a])} \n    ${i.includes(e[a])?"series-active":""}`)).attr("transform",(e=>`translate(0, ${n(e[a])+n.bandwidth()})`)).on("click",(e=>{const t=s.select(e.target.parentNode),a=t.classed("series-active");t.classed("series-active",!a)})).on("mouseover",(e=>{s.select(e.target.parentNode).classed("series-hovered",!0)})).on("mouseout",(e=>{s.select(e.target.parentNode).classed("series-hovered",!1)})),C=s.area().x((e=>m(J(e[r],c)))).y1((e=>p(e[o]))).y0(p(0));S.append("path").attr("fill",(e=>s.rgb(g(e[h])).brighter(.2))).datum((e=>e.values)).attr("d",C).attr("stroke",(e=>s.rgb(g(e[0][h])).darker(.5))),S.append("path").attr("class","top-line").attr("fill","none").datum((e=>e.values)).attr("d",C.lineY1()),S.append("g").attr("class","circles").selectAll(".circle").data((e=>e.values)).join("circle").attr("class","circle").attr("cx",(e=>m(J(e[r],c)))).attr("cy",(e=>p(e[o]))).attr("fill",(e=>s.rgb(g(e[h])).darker(1))).on("mouseover",((e,t)=>{s.select(e.target).classed("circle-hovered",!0),u.transition().duration(200).style("opacity",1),u.html(`${a}: ${t[a]} (${s.timeFormat(y)(s.timeParse(c)(t[r]))})\n      <br/>\n      ${o}: ${f+l(t[o],b)+x}\n      `),u.style("left",`${e.clientX}px`).style("top",`${e.clientY+20+window.scrollY}px`)})).on("mouseout",(e=>{s.select(e.target).classed("circle-hovered",!1),u.style("left","-300px").transition().duration(500).style("opacity",0)})),S.append("text").text((e=>e[a])).attr("text-anchor","right"===v?"start":"end").attr("transform",`translate(${"right"===v?F+5:-5}, 0)`).style("font-size",10)}({chartCore:O,nestedData:H,seriesField:z,defaultStateAll:Q,categoryScale:M,xField:B,yField:R,xAxisDateParser:g,xScale:j,yScale:_,fillColorScale:X,colorField:T,tooltipDiv:G,xTooltipFormatter:u,yValuePrefix:x,yValuePostfix:b,yValueFormatter:f,seriesLabelPosition:v,viewBoxWidth:W});const U=(K=q,e=>{if(e){const t=d(e).toLowerCase();K.forEach((e=>{const a=d(e);a.toLowerCase().includes(t)?s.select(`.series-${a}`).classed("series-matched",!0):s.select(`.series-${a}`).classed("series-matched",!1),s.select(".serieses").classed("searching",!0)}))}else K.forEach((e=>{const t=d(e);s.select(`.series-${t}`).classed("series-matched",!1)})),s.select(".serieses").classed("searching",!1)});var K;const Z=function({handleSearch:e,widgetsLeft:t,searchInputClassNames:a,seriesField:i}){const n=t.append("input").attr("type","text").attr("class",a);return n.attr("placeholder",`Find by ${i}`),n.on("keyup",(t=>{const a=t.target.value;e(a)})),n}({handleSearch:U,widgetsLeft:V,searchInputClassNames:w,seriesField:z});!function({widgetsLeft:e,goToInitialStateButtonClassNames:t,defaultStateAll:a,search:i,handleSearch:n}){const r=e.append("button").text("Go to Initial State").attr("class",t);r.classed("hidden",!1),r.on("click",(()=>{s.selectAll(".series").classed("series-active",!1),o.default.forEach(a,(e=>{s.select(`.series-${d(e)}`).classed("series-active",!0)})),i.node().value="",n("")}))}({widgetsLeft:V,goToInitialStateButtonClassNames:k,defaultStateAll:Q,search:Z,handleSearch:U}),function({widgetsLeft:e,clearAllButtonClassNames:t,search:a,handleSearch:i}){const n=e.append("button").text("Clear All").attr("class",t);n.classed("hidden",!1),n.on("click",(()=>{s.selectAll(".series").classed("series-active",!1),a.node().value="",i("")}))}({widgetsLeft:V,clearAllButtonClassNames:L,search:Z,handleSearch:U}),function({widgetsLeft:e,showAllButtonClassNames:t,search:a,handleSearch:i}){const n=e.append("button").text("Show All").attr("class",t);n.classed("hidden",!1),n.on("click",(()=>{s.selectAll(".series").classed("series-active",!0),a.node().value="",i("")}))}({widgetsLeft:V,showAllButtonClassNames:A,search:Z,handleSearch:U}),m({allComponents:P,svg:I,margins:{marginLeft:r,marginRight:i,marginTop:a,marginBottom:n}})}const U={xField:[v],yField:[x],seriesField:[v],colorField:[v]},K={aspectRatio:w([.01,Number.POSITIVE_INFINITY]),marginTop:C,marginRight:C,marginBottom:C,marginLeft:C,bgColor:k,seriesLabelPosition:S(["left","right"]),overlap:C,colorRange:L(),defaultState:z,activeOpacity:w([0,1]),inactiveOpacity:w([0,1])};function Z({widgetsRight:e,colorScaleForLegend:t}){e.html(function({color:e,columns:t=null,format:a=(e=>e),swatchSize:i=15,swatchWidth:n=i,swatchHeight:r=i,marginLeft:s=0,uid:o,customClass:l=""}){const c=o;return null!==t?`<div\n      style="display: flex; align-items: center; margin-left: ${+s}px; min-height: 33px; font: 10px sans-serif;"\n    >\n      <style>\n        .${c}-item {\n          break-inside: avoid;\n          display: flex;\n          align-items: center;\n          padding-bottom: 1px;\n        }\n\n        .${c}-label {\n          white-space: nowrap;\n          overflow: hidden;\n          text-overflow: ellipsis;\n          color: red;\n          max-width: calc(100% - ${+n}px - 0.5em);\n        }\n\n        .${c}-swatch {\n          width: ${+n}px;\n          height: ${+r}px;\n          margin: 0 0.5em 0 0;\n        }\n      </style>\n      <div style="width: 100%; columns: ${t};">\n        ${e.domain().map((t=>{const i=a(t);return`<div class="${c}-item">\n            <div class="${c}-swatch" style="background:${e(t)};"></div>\n            <div class="${l} ${c}-label" title="${i.replace(/["&]/g,G)}">\n              ${document.createTextNode(i)}\n            </div>\n          </div>`}))}\n      </div>\n    </div>`:`<div\n    style="display: flex; align-items: center; min-height: 33px; margin-left: ${+s}px; font: 10px sans-serif;"\n  >\n    <style>\n      .${c} {\n        display: inline-flex;\n        align-items: center;\n        margin-right: 1em;\n      }\n\n      .${c}::before {\n        content: "";\n        width: ${+n}px;\n        height: ${+r}px;\n        margin-right: 0.5em;\n        background: var(--color);\n      }\n    </style>\n    <div>\n      ${e.domain().map((t=>`<span class="${l} ${c}" style="--color: ${e(t)}"\n              >${a(t)}</span\n            >`)).join("")}\n    </div>\n  </div>`}({color:t,uid:"rs",customClass:""}))}function ee({data:e,options:{aspectRatio:t=.8,marginTop:a=0,marginRight:i=0,marginBottom:n=0,marginLeft:r=0,bgColor:l="#fafafa",colorScheme:c=s.schemeRdYlGn[F.length],descending:d=!0,yFieldLabels:p=F,uniqueFieldTimeParser:g="%Y%m",uniqueFieldTimeFormatter:h="%b %Y",xGridGap:u=.02,stackHeight:y=.5},dimensions:{xGridField:f,yGridField:x,xField:b,nameField:v,yFields:F,uniqueColumnField:S},chartContainerSelector:C}){const{svg:$,coreChartHeight:w,allComponents:k,chartCore:L,widgetsRight:A}=function({chartContainerSelector:e,coreChartWidth:t,aspectRatio:a,marginTop:i,marginBottom:n,marginLeft:r,marginRight:o,bgColor:l}){const c=t/a,d=c+i+n,m=t+r+o,p=s.select(e),g=p.append("div").attr("style","display: flex; justify-content: space-between; padding-bottom: 0.5rem;"),h=g.append("div").attr("style","display: flex; align-items: end; column-gap: 5px;"),u=g.append("div").attr("style","display: flex; align-items: center; column-gap: 10px;"),y=p.append("svg").attr("viewBox",`0 0 ${m} ${d}`).style("background",l),f=y.append("g").attr("class","all-components"),x=f.append("g").attr("transform",`translate(${r}, ${i})`);return{svg:y,coreChartHeight:c,allComponents:f,chartCore:x,widgetsLeft:h,widgetsRight:u,viewBoxWidth:m}}({chartContainerSelector:C,coreChartWidth:1e3,aspectRatio:t,marginTop:a,marginBottom:n,marginLeft:r,marginRight:i,bgColor:l}),z=s.select("body").append("div").attr("class","dom-tooltip").attr("style","opacity: 0; position: absolute; background-color: white; border-radius: 0.25rem; padding: 0.25rem 0.5rem; font-size: 0.75rem; line-height: 1rem; border-width: 1px;"),{maxY:B,stackedDataByYear:R,names:T}=function({data:e,yFields:t,nameField:a,xGridField:i,yGridField:n}){let r=0;e.forEach((e=>{let a=0;t.forEach((t=>{a+=Number.parseFloat(e[t])})),a>r&&(r=a)}));const l=r,c={};e.forEach((e=>{const t=e[a];c[t]?c[t].push(e):c[t]=[e]}));const d={};Object.keys(c).forEach((e=>{d[e]=s.stack().keys(t)(c[e])}));const m=o.default.uniqBy(e.map((e=>({[a]:e[a],[i]:e[i],[n]:e[n]}))),a);return{maxY:l,stackedDataByYear:d,names:m}}({data:e,yFields:F,nameField:v,xGridField:f,yGridField:x}),{yScale:N,xScale:D,colorScale:I,colorScaleForLegend:E,xGridScale:P,yGridScale:O}=function({data:e,maxY:t,xGridField:a,xGridGap:i,yGridField:n,descending:r,stackHeight:l,xField:c,colorScheme:d,yFields:m,yFieldLabels:p,coreChartWidth:g,coreChartHeight:h}){const u=[0,t],y=o.default.uniq(e.map((e=>e[a]))).sort(),f=s.scaleBand().domain(y).range([0,g]).paddingInner(i),x=o.default.uniq(e.map((e=>e[c]))).sort(),b=s.scaleBand().domain(x).range([0,f.bandwidth()]),v=o.default.uniq(e.map((e=>e[n]))),F=[0,h],S=s.scaleBand().domain(v).range(r?F.reverse():F).paddingInner(1-l);return{yScale:s.scaleLinear().domain(u).range([S.bandwidth(),0]),xScale:b,colorScale:s.scaleOrdinal(d).domain(m),colorScaleForLegend:s.scaleOrdinal(d).domain(p),xGridScale:f,yGridScale:S}}({data:e,maxY:B,xGridField:f,xGridGap:u,yGridField:x,descending:d,stackHeight:y,xField:b,colorScheme:c,yFields:F,yFieldLabels:p,coreChartWidth:1e3,coreChartHeight:w});!function({chartCore:e,names:t,xField:a,xGridScale:i,yGridScale:n,xGridField:r,yGridField:o,tooltipDiv:l,stackedDataByYear:c,nameField:d,colorScale:m,xScale:p,yScale:g,uniqueFieldTimeFormatter:h,uniqueFieldTimeParser:u,uniqueColumnField:y,yFields:f,yFieldLabels:x}){e.selectAll("g.cell").data(t).join("g").attr("transform",(e=>`translate(\n          ${i(e[r])},\n          ${n(e[o])}\n        )`)).each((function(e){s.select(this).selectAll("g").data(c[e[d]]).enter().append("g").attr("fill",(e=>m(e.key))).selectAll("rect").data((e=>e)).join("rect").attr("x",(e=>p(e.data[a]))).attr("y",(e=>g(e[1]))).attr("height",(e=>g(e[0])-g(e[1]))).attr("width",p.bandwidth()).on("mouseover",(function(e,t){s.select(this.parentNode).raise(),s.select(this).classed("rect-hovered",!0).raise(),l.transition().duration(200).style("opacity",1);const a=s.timeFormat(h)(s.timeParse(u)(t.data[y]))||t.data[y],i=f.map(((e,a)=>`<div style="display: inline-block; height: 0.5rem; width: 0.5rem; background: ${m(e)}"></div> ${x[a]}: ${s.format(".1%")(t.data[e])}`)).reverse();l.html(`<b>${a}</b> <br/> ${i.join("<br/>")}`),l.style("left",`${e.clientX}px`).style("top",`${e.clientY+20+window.scrollY}px`)})).on("mouseout",(function(){s.select(this).classed("rect-hovered",!1),l.style("left","-300px").transition().duration(500).style("opacity",0)}))})).append("text").text((e=>e[d])).attr("transform","translate(0, -5)").attr("font-size",14)}({chartCore:L,names:T,xField:b,xGridScale:P,yGridScale:O,xGridField:f,yGridField:x,tooltipDiv:z,stackedDataByYear:R,nameField:v,colorScale:I,xScale:D,yScale:N,uniqueFieldTimeFormatter:h,uniqueFieldTimeParser:g,uniqueColumnField:S,yFields:F,yFieldLabels:p}),Z({widgetsRight:A,colorScaleForLegend:E}),m({allComponents:k,svg:$,margins:{marginLeft:r,marginRight:i,marginTop:a,marginBottom:n}})}const te={xGridField:[v],yGridField:[v],xField:[v],nameField:[v],uniqueColumnField:[b]},ae={aspectRatio:w([.01,Number.POSITIVE_INFINITY]),marginTop:C,marginRight:C,marginBottom:C,marginLeft:C,bgColor:k,descending:$,stackHeight:w([0,1]),xGridGap:w([0,1])};function ie({chartContainerSelector:e,coreChartWidth:t,aspectRatio:a,marginTop:i,marginBottom:n,marginLeft:r,marginRight:o,bgColor:l}){const c=t/a,d=c+i+n,m=t+r+o,p=s.select(e),g=p.append("div").attr("style","display: flex; justify-content: space-between; padding-bottom: 0.5rem;"),h=g.append("div").attr("style","display: flex; align-items: center; column-gap: 5px;"),u=g.append("div").attr("style","display: flex; align-items: center; column-gap: 10px;"),y=p.append("svg").attr("viewBox",`0 0 ${m} ${d}`).style("background",l),f=y.append("g").attr("class","all-components"),x=f.append("g").attr("transform",`translate(${r}, ${i})`);return{svg:y,coreChartHeight:c,allComponents:f,chartCore:x,widgetsLeft:h,widgetsRight:u,viewBoxWidth:m}}function ne(){return s.select("body").append("div").attr("class","dom-tooltip").attr("style","opacity: 0; position: absolute; background-color: white; border-radius: 0.25rem; padding: 0.25rem 0.5rem; font-size: 0.75rem; line-height: 1rem; border-width: 1px;")}function re({data:e,dimensions:{sizeField:t,xField:a,yField:i,timeField:n,nameField:r,colorField:c},options:{motionDelay:p=1e3,marginTop:g=40,marginRight:h=50,marginBottom:u=50,marginLeft:y=40,bgColor:f="transparent",aspectRatio:x=2,sizeRange:b=[2,20],sizeValueFormat:v="",xDomainCustom:F=null,xAxisLabel:S=a,xValueFormat:C="",yDomainCustom:$=null,yAxisLabel:w=i,yValueFormat:k="",inbuiltScheme:L="schemePuRd",numberOfColors:A=9,inactiveOpacity:z=.1,activeOpacity:B=1,startButtonClassNames:R="",stopButtonClassNames:T="",searchButtonClassNames:N=""},chartContainerSelector:D}){!function({inactiveOpacity:e}){s.select("body").append("style").html(`\n  .group-circles.searching > .iv-circle:not(.s-match) {\n    opacity: ${e};\n  }\n  .group-circles.searching > .iv-circle.s-match {\n    stroke: #333;\n  }\n  `)}({inactiveOpacity:z});const I=1e3,{svg:E,coreChartHeight:P,allComponents:O,chartCore:V,widgetsLeft:W}=ie({chartContainerSelector:D,coreChartWidth:I,aspectRatio:x,marginTop:g,marginBottom:u,marginLeft:y,marginRight:h,bgColor:f}),G=ne(),{dataParsed:Y,dataAt:H,timeDomain:_,timeDomainLength:j}=function({data:e,xField:t,yField:a,sizeField:i,timeField:n}){const r=e.map((e=>({...e,[i]:Number.parseFloat(e[i]),[t]:Number.parseFloat(e[t]),[a]:Number.parseFloat(e[a])}))),s=t=>e.filter((e=>e[n]===t)),l=o.default.uniq(o.default.map(e,n)).sort(),c=l.length;return{dataParsed:r,dataAt:s,timeDomain:l,timeDomainLength:c}}({data:e,xField:a,yField:i,sizeField:t,timeField:n}),{sizeScale:M,xScale:q,yScale:X,colorScale:J}=function({dataParsed:e,sizeField:t,sizeRange:a,xDomainCustom:i,yDomainCustom:n,xField:r,yField:l,colorField:c,coreChartWidth:d,coreChartHeight:m,inbuiltScheme:p,numberOfColors:g}){const h=e.map((e=>e[t])),u=s.extent(h),y=t?s.scaleSqrt().domain([0,u[1]]).range(a):()=>a[0],f=i||s.extent(e.map((e=>e[r]))),x=n||s.extent(e.map((e=>e[l]))),b=s.scaleLinear().domain(f).range([0,d]),v=s.scaleLinear().range([m,0]).domain(x),F=o.default.uniq(o.default.map(e,c)),S=s.scaleOrdinal(F,s[p][g]);return{sizeScale:y,xScale:b,yScale:v,colorScale:S}}({dataParsed:Y,sizeField:t,sizeRange:b,xDomainCustom:F,yDomainCustom:$,xField:a,yField:i,colorField:c,coreChartWidth:I,coreChartHeight:P,inbuiltScheme:L,numberOfColors:A}),{startButton:Q,stopButton:U,rangeSlider:K,rangeSliderValue:Z}=function({widgetsLeft:e,timeField:t,startButtonClassNames:a,stopButtonClassNames:i}){const n=e.append("button").text("Start").attr("id","#start").attr("class",a),r=e.append("button").text("Stop").attr("id","#stop").attr("class",i),s=e.append("div").attr("style","display: flex; flex-direction: column; align-items: center; font-size: 0.75rem");s.append("label").text(t).attr("for","#range-slider").attr("style","text-transform: capitalize");const o=s.append("input").attr("type","range").attr("id","range-slider"),l=s.append("span");return{startButton:n,stopButton:r,rangeSlider:o,rangeSliderValue:l}}({widgetsLeft:W,timeField:n,startButtonClassNames:R,stopButtonClassNames:T});Z.text(_[0]),U.node().disabled=!0;const ee=function({chartCore:e,dataAt:t,timeDomain:a,nameField:i,sizeField:n,xScale:r,yScale:o,xField:l,yField:c,timeField:m,colorField:p,xValueFormatter:g,yValueFormatter:h,sizeValueFormatter:u,sizeScale:y,colorScale:f,activeOpacity:x,tooltipDiv:b}){return e.append("g").attr("class","group-circles").selectAll("circle").data(t(a[0]),(e=>e[i])).join("circle").sort(((e,t)=>s.descending(e[n],t[n]))).attr("class",(e=>`iv-circle iv-circle-${d(e[i])}`)).attr("cx",(e=>r(e[l]))).attr("cy",(e=>o(e[c]))).attr("r",(e=>y(e[n]))).attr("fill",(e=>f(e[p]))).attr("opacity",x).attr("stroke",(e=>s.rgb(f(e[p])).darker(.5))).on("mouseover",((e,t)=>{b.transition().duration(200).style("opacity",1),b.html(`${t[i]} (${t[m]})\n      <br/>\n      <div style="text-transform: capitalize">\n      <span> ${l}: ${g(t[l])}</span>\n      <br/>\n      <span>${c}: ${h(t[c])}</span>\n      <br/>\n      ${n?`<span>${n}: ${u(t[n])}</span>`:""}\n      </div>\n      `),s.select(e.target).attr("stroke-width",2),b.style("left",`${e.clientX}px`).style("top",`${e.clientY+20+window.scrollY}px`)})).on("mouseout",(e=>{s.select(e.target).attr("stroke-width",1),b.style("left","-300px").transition().duration(500).style("opacity",0)}))}({chartCore:V,dataAt:H,timeDomain:_,nameField:r,sizeField:t,xScale:q,yScale:X,xField:a,yField:i,timeField:n,colorField:c,xValueFormatter:e=>l(e,C),yValueFormatter:e=>l(e,k),sizeValueFormatter:e=>l(e,v),sizeScale:M,colorScale:J,activeOpacity:B,tooltipDiv:G});!function({rangeSlider:e,timeDomainLength:t,timeDomain:a,rangeSliderValue:i,dataAt:n,updateCircles:r,startButton:s,stopButton:o,intervalId:l,motionDelay:c}){e.attr("min",0).attr("max",t-1).attr("value",0).on("input",(e=>{const t=Number.parseInt(e.target.value,10);i.text(a[t]),r(n(a[t]))})),s.on("click",(()=>{s.node().disabled=!0,o.node().disabled=!1,Number.parseInt(e.node().value,10)===Number.parseInt(t-1,10)&&(e.node().value=0,i.text(a[0]),r(n(a[0]))),l=window.setInterval((()=>{if(Number.parseInt(e.node().value,10)===Number.parseInt(t-1,10))return window.clearInterval(l),s.node().disabled=!1,void(o.node().disabled=!0);e.node().value++;const c=Number.parseInt(e.node().value,10);i.text(a[c]),r(n(a[c]))}),c)})),o.on("click",(()=>{o.node().disabled=!0,s.node().disabled=!1,window.clearInterval(l)}))}({rangeSlider:K,timeDomainLength:j,timeDomain:_,rangeSliderValue:Z,dataAt:H,updateCircles:e=>{ee.data(e,(e=>e[r])).sort(((e,a)=>s.descending(e[t],a[t]))).transition().duration(p).attr("cx",(e=>q(e[a]))).attr("cy",(e=>X(e[i]))).attr("r",(e=>M(e[t])))},startButton:Q,stopButton:U,intervalId:undefined,motionDelay:p}),function({widgetsLeft:e,nameField:t,searchButtonClassNames:a,circles:i,sizeField:n}){function r(e){if(e){s.select(".group-circles").classed("searching",!0);const a=[];i.classed("s-match",(i=>{const n=i[t].toLowerCase().includes(e.toLowerCase());return n&&a.push(`.iv-circle-${d(i[t])}`),n})),a.forEach((e=>{s.select(e).raise()}))}else s.select(".group-circles").classed("searching",!1),i.sort(((e,t)=>s.descending(e[n],t[n])))}e.append("input").attr("type","text").attr("placeholder",`Find by ${t}`).attr("class",a).on("keyup",(e=>{r(e.target.value.trim())}))}({widgetsLeft:W,nameField:r,searchButtonClassNames:N,circles:ee,sizeField:t}),function({chartCore:e,coreChartHeight:t,coreChartWidth:a,xScale:i,xAxisLabel:n}){const r=e.append("g").attr("class","x-axis").lower();r.attr("transform",`translate(0, ${t})`).call(s.axisBottom(i).tickSize(-t-6)).style("color","#777").call((e=>{e.selectAll(".tick line").style("color","#ddd").attr("transform","translate(0, 6)"),e.selectAll(".tick text").attr("transform","translate(0, 6)"),e.select(".domain").remove()})),r.append("text").attr("transform",`translate(${a/2}, 35)`).style("text-anchor","middle").style("dominant-baseline","top").style("fill","#333").style("font-size","12px").style("font-weight","bold").text(n)}({chartCore:V,coreChartHeight:P,coreChartWidth:I,xScale:q,xAxisLabel:S}),function({chartCore:e,coreChartWidth:t,coreChartHeight:a,yScale:i,yAxisLabel:n}){const r=e.append("g").attr("class","y-axis").lower();r.append("g").call(s.axisLeft(i).tickSize(-t-6)).style("color","#777").call((e=>{e.selectAll(".tick line").style("color","#ddd").attr("transform","translate(-6, 0)"),e.selectAll(".tick text").attr("transform","translate(-6, 0)"),e.select(".domain").remove()})).attr("class","y-axis"),r.append("text").attr("transform",`translate(-35, ${a/2}), rotate(-90)`).style("text-anchor","middle").style("dominant-baseline","hanging").style("fill","#333").style("font-size","12px").style("font-weight","bold").text(n)}({chartCore:V,coreChartWidth:I,coreChartHeight:P,yScale:X,yAxisLabel:w}),m({allComponents:O,svg:E,margins:{marginLeft:y,marginRight:h,marginTop:g,marginBottom:u}})}const se={sizeField:[],xField:[v,x],yField:[v,x],timeField:[v],nameField:[v],colorField:[]},oe={aspectRatio:w([.01,Number.POSITIVE_INFINITY]),marginTop:C,marginRight:C,marginBottom:C,marginLeft:C,bgColor:k,sizeRange:A,xDomainCustom:A,yDomainCustom:A,inbuiltScheme:S(H),numberOfColors:w([3,9])};function le({data:e,options:{aspectRatio:t=.8,marginTop:a=0,marginRight:i=0,marginBottom:n=0,marginLeft:r=0,bgColor:p="transparent",sizeLegendLabel:g=o.default.capitalize(_),sizeLegendValues:h=[1,5,10,20],sizeLegendGapInSymbols:u=25,sizeLegendMoveSymbolsDownBy:y=15,xDomain:f,xAxisLabel:x=G,xAxisLabelOffset:b=-40,xAxisValueFormatter:v="",yAxisDateParser:F="",yAxisDateFormatter:S="",colorLegendValueFormatter:C="",sizeLegendValueFormatter:$="",sizeValueFormatter:w="",colorDomain:k,colorRange:L,colorLegendLabel:A,sizeRange:z=[2,20],sizeScaleType:B="linear",sizeScaleLogBase:R=10,dominoHeight:T=.3,yPaddingOuter:N=.1,initialState:D=[],activeOpacity:I=1,inactiveOpacity:E=.1,searchInputClassNames:P="",goToInitialStateButtonClassNames:O="",clearAllButtonClassNames:W=""},dimensions:{xField:G,yField:Y,dominoField:H,sizeField:_,colorField:j},chartContainerSelector:M}){!function({inactiveOpacity:e,activeOpacity:t}){s.select("body").append("style").html(`\n     .g-ribbons .ribbon {\n        fill-opacity: ${e};\n      }\n      .g-ribbons .ribbon.ribbon-active {\n        fill-opacity: ${t};\n      }\n      .g-ribbons.searching .ribbon.ribbon-matched {\n        stroke: #333;\n        stroke-width: 1;\n      }\n      .g-ribbons .ribbon.ribbon-hovered {\n        stroke: #333;\n        stroke-width: 1;\n      }\n      .domino-hovered {\n        stroke: #333;\n        stroke-width: 1;\n      }\n      .domino-matched {\n        stroke: #333;\n        stroke-width: 1;\n      }\n  `)}({inactiveOpacity:E,activeOpacity:I});const q=1e3,{svg:X,coreChartHeight:J,allComponents:Q,chartCore:U,widgetsLeft:K,widgetsRight:Z}=function({chartContainerSelector:e,coreChartWidth:t,aspectRatio:a,marginTop:i,marginBottom:n,marginLeft:r,marginRight:o,bgColor:l}){const c=t/a,d=c+i+n,m=t+r+o,p=s.select(e),g=p.append("div").attr("style","display: flex; justify-content: space-between; padding-bottom: 0.5rem;"),h=g.append("div").attr("style","display: flex; align-items: end; column-gap: 5px;"),u=g.append("div").attr("style","display: flex; align-items: center; column-gap: 10px;"),y=p.append("svg").attr("viewBox",`0 0 ${m} ${d}`).style("background",l),f=y.append("g").attr("class","all-components"),x=f.append("g").attr("transform",`translate(${r}, ${i})`);return{svg:y,coreChartHeight:c,allComponents:f,chartCore:x,widgetsLeft:h,widgetsRight:u}}({chartContainerSelector:M,coreChartWidth:q,aspectRatio:t,marginTop:a,marginBottom:n,marginLeft:r,marginRight:i,bgColor:p}),ee=s.select("body").append("div").attr("class","dom-tooltip").attr("style","opacity: 0; position: absolute; background-color: white; border-radius: 0.25rem; padding: 0.25rem 0.5rem; font-size: 0.75rem; line-height: 1rem; border-width: 1px;"),{allDominoFieldValues:te,defaultStateAll:ae}=function({data:e,dominoField:t,initialState:a}){const i=o.default.chain(e).map(t).uniq().value(),n=o.default(e).map(t).uniq().value();return{allDominoFieldValues:i,defaultStateAll:"All"===a?n:a}}({data:e,dominoField:H,initialState:D}),{xScale:ie,yScale:ne,colorScale:re,sizeScale:se,yDomain:oe}=function({data:e,xField:t,yField:a,sizeField:i,colorField:n,colorRange:r,colorDomain:l,xDomain:c,coreChartWidth:d,coreChartHeight:m,yPaddingOuter:p,dominoHeight:g,sizeScaleType:h,sizeScaleLogBase:u,sizeRange:y}){const f=1-g,x=s.scaleBand().range([0,m]).paddingInner(f).paddingOuter(p),b=s.scaleLinear().range([0,d]),v="log"===h?s.scaleLog().base(u||10).range(y):s.scaleLinear().range(y),F=o.default.chain(e).map(a).uniq().value().sort(),S=s.extent(o.default.chain(e).map(t).uniq().value((e=>Number.parseFloat(e))));x.domain(F),b.domain((c||S).slice());const C=s.extent(o.default.chain(e).map(i).uniq().value((e=>Number.parseFloat(e))));v.domain(C);const $=s.extent(e.map((e=>Number.parseFloat(e[n])))),w=[0,2,3,6],k=s.schemeSpectral[9].filter(((e,t)=>w.indexOf(t)>-1)).slice().reverse();return{xScale:b,yScale:x,colorScale:s.scaleQuantize().range(r||k).domain(l||$).nice(),sizeScale:v,yDomain:F}}({data:e,xField:G,yField:Y,sizeField:_,colorField:j,colorRange:L,colorDomain:k,xDomain:f,coreChartWidth:q,coreChartHeight:J,yPaddingOuter:N,dominoHeight:T,sizeScaleType:B,sizeScaleLogBase:R,sizeRange:z});!function({chartCore:e,xAxisLabel:t,coreChartWidth:a,xAxisLabelOffset:i,yScale:n,yDomain:r,xScale:o,coreChartHeight:l,formatNumber:c,xAxisValueFormatter:d}){e.append("g").append("text").attr("class","font-sans x-axis-label").text(t).attr("text-anchor","middle").attr("alignment-baseline","middle").attr("transform",`translate(${a/2}, ${i})`).style("font-size","12px").style("font-weight",600).style("text-transform","capitalize"),e.append("g").attr("class","x-axis-top").attr("transform",`translate(0, ${n(r[0])-30})`).call(s.axisTop(o).tickSize(-l).tickFormat((e=>c(e,d)))).call((e=>e.select(".domain").remove())).call((e=>e.selectAll(".tick line").attr("stroke-opacity",.2)))}({chartCore:U,xAxisLabel:x,coreChartWidth:q,xAxisLabelOffset:b,yScale:ne,yDomain:oe,xScale:ie,coreChartHeight:J,formatNumber:l,xAxisValueFormatter:v}),function({chartCore:e,xScale:t,xDomain:a,yScale:i,formatDate:n,yAxisDateParser:r,yAxisDateFormatter:o}){e.append("g").attr("class","y-axis-right").attr("transform",`translate(${t(a[1])+20}, 0)`).call(s.axisRight(i).tickSize(0).tickFormat((e=>n(e,r,o)))).call((e=>e.select(".domain").remove()))}({chartCore:U,xScale:ie,xDomain:f,yScale:ne,formatDate:c,yAxisDateParser:F,yAxisDateFormatter:S}),function({data:e,yField:t,sizeField:a,sizeScale:i,xAxisValueFormatter:n,yAxisDateParser:r,yAxisDateFormatter:m,sizeValueFormatter:p,chartCore:g,yScale:h,dominoField:u,xScale:y,xField:f,colorScale:x,colorField:b,tooltipDiv:v,allDominoFieldValues:F,defaultStateAll:S}){const C=g.append("g").attr("class","g-ribbons"),$=[];e.forEach((e=>{const n=y(e[f])-i(e[a])/2,r=n+i(e[a]),s=h(e[t]);$.push({...e,x0:n,x1:r,y0:s},{...e,x0:n,x1:r,y0:s+h.bandwidth()})}));const w=s.area().curve(s.curveMonotoneY).y((e=>e.y0)).x0((e=>e.x0)).x1((e=>e.x1));g.append("g").attr("class","g-dominos").selectAll("rect").data(e).join("rect").attr("class",(e=>`\n      domino-${d(e[u])}\n      ${S.includes(e[u])?"domino-active":""}\n    `)).attr("x",(e=>y(e[f])-i(e[a])/2)).attr("y",(e=>h(e[t]))).attr("width",(e=>i(e[a]))).attr("height",h.bandwidth()).attr("fill",(e=>x(Number.parseFloat(e[b])))).attr("stroke",(e=>s.rgb(x(Number.parseFloat(e[b]))).darker(.5))).on("mouseover",((e,i)=>{const o=l(i[f],n),g=c(i[t],r,m),h=l(i[a],p);v.transition().duration(200).style("opacity",1),v.html(`<div>${i[u]} (${g})</div>\n          <div style="text-transform: capitalize">${f}: ${o}</div>\n          <div style="text-transform: capitalize">${a}: ${h}</div>\n         </div>`),s.select(e.target).raise();const y=d(i[u]);s.select(`.ribbon-${y}`).classed("ribbon-hovered",!0),s.selectAll(`.domino-${y}`).raise().classed("domino-hovered",!0),s.select(".g-ribbons").classed("hovered",!0),v.style("left",`${e.clientX}px`).style("top",`${e.clientY+20+window.scrollY}px`)})).on("mouseout",((e,t)=>{v.style("left","-300px").transition().duration(500).style("opacity",0);const a=d(t[u]);s.select(`.ribbon-${a}`).classed("ribbon-hovered",!1),s.selectAll(`.domino-${a}`).classed("domino-hovered",!1),s.select(e.target).lower(),s.select(".g-ribbons").classed("hovered",!1)})).on("click",((e,t)=>{const a=d(t[u]),i=s.select(`.ribbon-${a}`).classed("ribbon-active");s.select(`.ribbon-${a}`).classed("ribbon-active",!i)})),C.selectAll("path").data(o.default.chain(e).map(u).uniq().value()).join("path").attr("fill",(e=>`url(#gradient-${d(e)})`)).attr("class",(e=>`\n      ribbon\n      ribbon-${d(e)}\n      ${S.includes(e)?"ribbon-active":""}`)).attr("d",(e=>w(o.default.filter($,{[u]:e})))).on("mouseover",((e,t)=>{const a=d(t);s.select(`.ribbon-${a}`).classed("ribbon-hovered",!0),s.selectAll(`.domino-${a}`).classed("domino-hovered",!0).raise(),s.select(".g-ribbons").classed("hovered",!0)})).on("mouseout",((e,t)=>{const a=d(t);s.select(`.ribbon-${a}`).classed("ribbon-hovered",!1),s.selectAll(`.domino-${a}`).classed("domino-hovered",!1).lower(),s.select(".g-ribbons").classed("hovered",!1)})).on("click",(e=>{const t=s.select(e.target).classed("ribbon-active");s.select(e.target).classed("ribbon-active",!t)}));const k=g.append("defs");F.forEach((e=>{const t=k.append("linearGradient").attr("id",`gradient-${d(e)}`).attr("x1","100%").attr("x2","100%").attr("y1","0%").attr("y2","100%"),a=o.default.chain($).filter({[u]:e}).sortBy().value();a.forEach((e=>{t.append("stop").attr("offset",100*(e.y0-a[0].y0)/(a[a.length-1].y0-a[0].y0)+"%").attr("stop-color",x(e[b]))}))}))}({data:e,yField:Y,sizeField:_,sizeScale:se,xAxisValueFormatter:v,yAxisDateParser:F,yAxisDateFormatter:S,sizeValueFormatter:w,chartCore:U,yScale:ne,dominoField:H,xScale:ie,xField:G,colorScale:re,colorField:j,tooltipDiv:ee,allDominoFieldValues:te,defaultStateAll:ae});const le=(ce=te,e=>{if(e){const t=e.toLowerCase();ce.forEach((e=>{const a=d(e);e.toLowerCase().includes(t)?(s.select(`.ribbon-${a}`).classed("ribbon-matched",!0),s.selectAll(`.domino-${a}`).classed("domino-matched",!0),s.select(".g-ribbons").classed("searching",!0)):(s.select(`.ribbon-${a}`).classed("ribbon-matched",!1),s.selectAll(`.domino-${a}`).classed("domino-matched",!1))}))}else ce.forEach((e=>{const t=d(e);s.select(`.ribbon-${t}`).classed("ribbon-matched",!1),s.selectAll(`.domino-${t}`).classed("domino-matched",!1)})),s.select(".g-ribbons").classed("searching",!1)});var ce;const de=function({handleSearch:e,widgetsLeft:t,searchInputClassNames:a,dominoField:i}){const n=t.append("input").attr("type","text").attr("class",a);return n.attr("placeholder",`Find by ${i}`),n.on("keyup",(t=>{const a=t.target.value;e(a)})),n}({handleSearch:le,widgetsLeft:K,searchInputClassNames:P,dominoField:H});!function({widgetsLeft:e,goToInitialStateButtonClassNames:t,defaultStateAll:a,search:i,handleSearch:n}){e.append("button").text("Go to Initial State").attr("class",t).on("click",(()=>{s.selectAll(".ribbon").classed("ribbon-active",!1),o.default.forEach(a,(e=>{s.select(`.ribbon-${d(e)}`).classed("ribbon-active",!0)})),i.node().value="",n("")}))}({widgetsLeft:K,goToInitialStateButtonClassNames:O,defaultStateAll:ae,search:de,handleSearch:le}),function({widgetsLeft:e,clearAllButtonClassNames:t,search:a,handleSearch:i}){e.append("button").text("Clear All").attr("class",t).on("click",(()=>{s.selectAll(".ribbon").classed("ribbon-active",!1),a.node().value="",i("")}))}({widgetsLeft:K,clearAllButtonClassNames:W,search:de,handleSearch:le}),function({colorScale:e,colorLegendLabel:t,widgetsRight:a,colorField:i,colorLegendValueFormatter:n}){a.append((()=>V({color:e,title:t||o.default.capitalize(i),width:260,tickFormat:e=>l(e,n)})))}({colorScale:re,colorLegendLabel:A,widgetsRight:Z,colorField:j,colorLegendValueFormatter:C}),function({widgetsRight:e,sizeLegendValues:t,sizeLegendMoveSymbolsDownBy:a,sizeScale:i,sizeLegendGapInSymbols:n,sizeLegendValueFormatter:r,sizeLegendLabel:s}){const o=e.append("svg"),c=o.append("g");c.append("g").attr("class","g-size-container").attr("transform",`translate(0, ${a})`).selectAll(".g-size-dominos").data(t).enter().append("g").attr("class","g-size-dominos").append("rect").style("fill","#bebebe").style("stroke-width",1).style("stroke","gray").attr("width",(e=>i(e))).attr("height",25).attr("x",((e,t)=>i(e)+t*n)),c.selectAll(".g-size-dominos").append("text").attr("dy",35).attr("dx",((e,t)=>1.5*i(e)+t*n)).attr("text-anchor","middle").style("font-size",8).text((e=>l(e,r))),c.append("text").attr("alignment-baseline","hanging").style("font-size",10).style("font-weight",600).text(s);const d=c.node().getBBox();o.attr("height",d.height).attr("width",d.width)}({widgetsRight:Z,sizeLegendValues:h,sizeLegendMoveSymbolsDownBy:y,sizeScale:se,sizeLegendGapInSymbols:u,sizeLegendValueFormatter:$,sizeLegendLabel:g}),m({allComponents:Q,svg:X,margins:{marginLeft:r,marginRight:i,marginTop:a,marginBottom:n}})}const ce={xField:[x],yField:[v],dominoField:[v],sizeField:[x],colorField:[x]},de={aspectRatio:w([0,Number.POSITIVE_INFINITY]),marginTop:C,marginRight:C,marginBottom:C,marginLeft:C,bgColor:k,xDomain:A,xAxisLabelOffset:C,dominoHeight:w([0,1]),sizeScaleType:S(["log","linear"]),sizeRange:A,sizeLegendValues:A,sizeLegendGapInSymbols:C,sizeLegendMoveSymbolsDownBy:C,colorDomain:A,colorRange:L(),initialState:z,activeOpacity:w([0,1]),inactiveOpacity:w([0,1])};let me="global";function pe({data:e,options:{aspectRatio:t=1,marginTop:a=0,marginRight:i=0,marginBottom:n=0,marginLeft:r=0,bgColor:c="transparent",valuePrefix:p="",valuePostfix:g="",valueFormatter:h="",chordType:u="undirected",colorScheme:y=s.schemeCategory10,arcLabelFontSize:f="8px",inactiveOpacity:x=.2,activeOpacity:b=.8,clickInteraction:v=!1,searchInputClassNames:F="",clearAllButtonClassNames:S="",showAllButtonClassNames:C="",startingState:$="showAll"},dimensions:{sourceField:w,targetField:k,valueField:L},chartContainerSelector:A}){!function({activeOpacity:e,inactiveOpacity:t}){s.select("body").append("style").html(`\n  path.ribbon {\n    fill-opacity: ${t}\n  }\n  path.ribbon.ribbon-active {\n    fill-opacity: ${e}\n  }\n  path.ribbon.ribbon-hovered {\n    fill-opacity: ${e}\n  }\n  g.ribbons.searching path.ribbon.ribbon-matched {\n    fill-opacity: ${e}\n  }\n  g.arc path.chord{\n    fill-opacity: ${t};\n    stroke-width: 2; \n    stroke: #fff;\n  }\n  g.arc.arc-active path.chord{\n    fill-opacity: ${e}\n  }\n  g.arc.arc-hovered path.chord{\n    fill-opacity: ${e}\n  }\n  g.arcs.searching g.arc.arc-matched path.chord{\n    fill-opacity: ${e}\n  }\n  `)}({activeOpacity:b,inactiveOpacity:x});const{svg:z,coreChartHeight:B,allComponents:R,chartCore:T,widgetsLeft:N}=ie({chartContainerSelector:A,coreChartWidth:1e3,aspectRatio:t,marginTop:a,marginBottom:n,marginLeft:r,marginRight:i,bgColor:c}),D=ne(),{dataParsed:I,names:E,matrix:P,index:O,reverseIndex:V}=function({data:e,valueField:t,sourceField:a,targetField:i}){const n=e.map((e=>{const a={...e};return a[t]=Number.parseFloat(e[t]),a})),r=o.default(n).flatMap((e=>[e[a],e[i]])).uniq().value(),s=o.default.chunk(o.default.times(o.default.multiply(r.length,r.length),o.default.constant(0)),r.length),l=new Map(r.map(((e,t)=>[d(e),t]))),c=new Map(r.map(((e,t)=>[t,d(e)])));return o.default.forEach(n,(e=>{s[l.get(d(e[a]))][l.get(d(e[i]))]=Number(e[t])})),{dataParsed:n,names:r,matrix:s,index:l,reverseIndex:c}}({data:e,valueField:L,sourceField:w,targetField:k}),W=.5*Math.min(1e3,B)-20,G=W+20,{chord:Y,arc:H,ribbon:_}=function({innerRadius:e,outerRadius:t,chordType:a}){const i=s.chordDirected().padAngle(12/e).sortSubgroups(s.descending).sortChords(s.descending),n=s.arc().innerRadius(e).outerRadius(t);let r="directed"===a?s.ribbonArrow():s.ribbon();return r=r.radius(e-.5).padAngle(1/e),{chord:i,arc:n,ribbon:r}}({innerRadius:W,outerRadius:G,chordType:u}),{colorScale:j}=function({names:e,colorScheme:t}){return{colorScale:s.scaleOrdinal(e,t)}}({names:E,colorScheme:y});!function({dataParsed:e,matrix:t,names:a,chartCore:i,chord:n,arc:r,ribbon:c,colorScale:d,outerRadius:m,targetField:p,sourceField:g,valueField:h,tooltipDiv:u,valuePrefix:y,valueFormatter:f,valuePostfix:x,arcLabelFontSize:b,clickInteraction:v,chordType:F}){const S=n(t),C="arcId";i.append("path").attr("id",C).attr("fill","none").attr("d",s.arc()({outerRadius:m,startAngle:0,endAngle:2*Math.PI}));i.append("g").attr("class","arcs").selectAll("g").data(S.groups).join("g").call((e=>e.append("path").attr("d",r).attr("class","chord").attr("fill",(e=>d(a[e.index]))))).call((e=>e.append("text").attr("dy",-3).append("textPath").attr("xlink:href",`#${C}`).attr("startOffset",(e=>e.startAngle*m)).style("font-size",b).style("fill","black").text((e=>a[e.index])))).on("mouseover",((t,i)=>{"showAll"===me&&ue(),s.select(`.arc-${i.index}`).classed("arc-hovered",!0),s.selectAll(`.ribbon-source-${i.index}`).classed("ribbon-hovered",!0),s.selectAll(`.ribbon-target-${i.index}`).classed("ribbon-hovered",!0),u.transition().duration(200).style("opacity",1);const n=a[i.index],r=o.default.filter(e,(e=>e[g]===n||e[p]===n)),c=o.default.map(a,(e=>{if(n===e){const t=o.default(r).filter((t=>t[g]===e&&t[p]===e)).sumBy(h),a="undirected"===F?"":t>=0?"→":"←";return{_name_:e,_value_:Math.abs(t),arrowSymbol:a}}const t=o.default(r).filter((t=>t[p]===e)).sumBy(h),a=o.default(r).filter((t=>t[g]===e)).sumBy(h),i="undirected"===F?t+a:t-a,s="undirected"===F?"":i>=0?"&rarr;":"&larr;";return{_name_:e,_value_:Math.abs(i),arrowSymbol:s}})),m=o.default(r).sumBy(h),b=c.map((e=>`${e.arrowSymbol} <div style="display: inline-block; height: 0.5rem; width: 0.5rem; background: ${d(e._name_)}"></div> ${e._name_}: ${y+l(e._value_,f)+x}`)).reverse();u.html(`<b>${n}</b>: ${y+l(m,f)+x}\n        <br/>\n        ${b.join("<br/>")}\n        `),u.style("left",`${t.clientX}px`).style("top",`${t.clientY+20+window.scrollY}px`)})).on("mouseout",((e,t)=>{s.select(`.arc-${t.index}`).classed("arc-hovered",!1),s.selectAll(`.ribbon-source-${t.index}`).classed("ribbon-hovered",!1),s.selectAll(`.ribbon-target-${t.index}`).classed("ribbon-hovered",!1),u.style("left","-300px").transition().duration(500).style("opacity",0),"showAll"===me&&he()})).on("click",((e,t)=>{if(v){const a=s.select(e.target.parentNode).classed("arc-active");s.select(`.arc-${t.index}`).classed("arc-active",!a),s.selectAll(`.ribbon-${t.index}`).classed("ribbon-active",!a)}}));i.append("g").attr("class","ribbons").selectAll("g").data(S).join("path").attr("d",c).attr("class",(e=>`ribbon \n      ribbon-${e.source.index}-${e.target.index} \n      ribbon-source-${e.source.index} \n      ribbon-target-${e.target.index}\n      `)).attr("fill",(e=>d(a[e.target.index]))).style("mix-blend-mode","multiply").on("mouseover",((e,t)=>{"showAll"==me&&ue(),s.select(`.ribbon-${t.source.index}-${t.target.index}`).classed("ribbon-hovered",!0),s.select(`.arc-${t.source.index}`).classed("arc-hovered",!0),s.select(`.arc-${t.target.index}`).classed("arc-hovered",!0),u.transition().duration(200).style("opacity",1);const i=a[t.source.index],n=a[t.target.index],r=t.source.value,o="undirected"===F?"⟷":"→";u.html(`<div style="display: inline-block; height: 0.5rem; width: 0.5rem; background: ${d(i)}"></div> ${i} \n        ${o} \n        <div style="display: inline-block; height: 0.5rem; width: 0.5rem; background: ${d(n)}"></div> ${n}: <b>${y+l(r,f)+x}</b>\n        `),u.style("left",`${e.clientX}px`).style("top",`${e.clientY+20+window.scrollY}px`)})).on("mouseout",((e,t)=>{s.select(`.ribbon-${t.source.index}-${t.target.index}`).classed("ribbon-hovered",!1),s.select(`.arc-${t.source.index}`).classed("arc-hovered",!1),s.select(`.arc-${t.target.index}`).classed("arc-hovered",!1),"showAll"==me&&he(),u.style("left","-300px").transition().duration(500).style("opacity",0)})).on("click",((e,t)=>{if(v){const a=s.select(e.target).classed("ribbon-active");s.select(`.ribbon-${t.source.index}-${t.target.index}`).classed("ribbon-active",!a),s.select(`.arc-${t.source.index}`).classed("arc-active",!a),s.select(`.arc-${t.target.index}`).classed("arc-active",!a)}}))}({dataParsed:I,matrix:P,names:E,chartCore:T,chord:Y,arc:H,ribbon:_,colorScale:j,outerRadius:G,reverseIndex:V,targetField:k,sourceField:w,valueField:L,tooltipDiv:D,valuePrefix:p,valueFormatter:h,valuePostfix:g,arcLabelFontSize:f,clickInteraction:v,chordType:u});const M=ge(E,O),q=function({handleSearch:e,widgetsLeft:t,searchInputClassNames:a,sourceField:i}){const n=t.append("input").attr("type","text").attr("class",a);return n.attr("placeholder",`Find by ${i}`),n.on("keyup",(t=>{const a=t.target.value;e(a)})),n}({handleSearch:M,widgetsLeft:N,searchInputClassNames:F,sourceField:w});!function({widgetsLeft:e,clearAllButtonClassNames:t,search:a,handleSearch:i}){const n=e.append("button").text("Clear All").attr("class",t);n.classed("hidden",!1),n.on("click",(()=>{me="clearAll",ue(),a.node().value="",i("")}))}({widgetsLeft:N,clearAllButtonClassNames:S,search:q,handleSearch:M,index:O}),function({widgetsLeft:e,showAllButtonClassNames:t,search:a,handleSearch:i}){const n=e.append("button").text("Show All").attr("class",t);n.classed("hidden",!1),n.on("click",(()=>{me="showAll",he(),a.node().value="",i("")}))}({widgetsLeft:N,showAllButtonClassNames:C,search:q,handleSearch:M}),me=$,"showAll"===me?he():"clearAll"===me&&ue(),m({allComponents:R,svg:z,margins:{marginLeft:r,marginRight:i,marginTop:a,marginBottom:n}})}const ge=(e,t)=>a=>{if(a){const i=a.toLowerCase(),n=[];e.forEach((e=>{const a=d(e).toLowerCase(),r=t.get(a);a.toLowerCase().includes(i)&&n.push(r)})),s.select(".ribbons").classed("searching",!0),s.select(".arcs").classed("searching",!0),s.selectAll(".arc").classed("arc-matched",!1),s.selectAll(".ribbon").classed("ribbon-matched",!1),ue(),n.forEach((e=>{s.select(`.arc-${e}`).classed("arc-matched",!0),s.selectAll(`.ribbon-source-${e}`).classed("ribbon-matched",!0),s.selectAll(`.ribbon-target-${e}`).classed("ribbon-matched",!0)}))}else s.select(".ribbons").classed("searching",!1),s.select(".arcs").classed("searching",!1),s.selectAll(".arc").classed("arc-matched",!1),s.selectAll(".ribbon").classed("ribbon-matched",!1),"showAll"===me?he():"clearAll"===me&&ue()};function he(){s.selectAll(".ribbon").classed("ribbon-active",!0),s.selectAll(".arc").classed("arc-active",!0)}function ue(){s.selectAll(".ribbon").classed("ribbon-active",!1),s.selectAll(".arc").classed("arc-active",!1)}const ye={sourceField:[v],targetField:[v],valueField:[({data:e,dimensions:t,dim:a})=>{const i=o.default.filter(e,((e,i)=>{e.rowNumber=i+1;const n=Number(e[t[a]]);return Number.isNaN(n)||n<0}));return o.default.isEmpty(i)?{valid:!0,message:""}:{valid:!1,message:i}},v]},fe={aspectRatio:w([0,Number.POSITIVE_INFINITY]),marginTop:C,marginRight:C,marginBottom:C,marginLeft:C,bgColor:k,chordType:S(["directed","undirected"]),colorScheme:L,arcLabelFontSize:e=>e.match(/^[0-9]*?px$/)?{valid:!0}:{valid:!1,message:'Should be a valid string like "14px"'},activeOpacity:w([0,1]),inactiveOpacity:w([0,1]),clickInteraction:$,startingState:S(["showAll","clearAll"])};function xe({data:e,options:{aspectRatio:t=.7,bgColor:a="transparent",marginTop:i=0,marginRight:n=0,marginBottom:r=0,marginLeft:o=0,colorScheme:l=["#3077aa","#ed3833"],barOpacity:c=1,barValueMidPoint:d=50,axesTickSize:p=10,leftXAxisLabel:g=f,rightXAxisLabel:h=x,xAxisLabel:u=""},dimensions:{yField:y,barLeftValueField:f,barRightValueField:x,barLeftLabelField:b,barRightLabelField:v},chartContainerSelector:F}){s.select("body").append("style").html(`\n  g.bar {\n    stroke: ${a};\n  }\n  g.bar.bar-hovered {\n    stroke: #333;\n    stroke-width: 1;\n  }\n`);const S=ne(),C=1200,{svg:$,coreChartHeight:w,allComponents:k,chartCore:L}=ie({chartContainerSelector:F,coreChartWidth:C,aspectRatio:t,marginTop:i,marginBottom:r,marginLeft:o,marginRight:n,bgColor:a}),A=s.symbol().type(s.symbols[5]),z=e.map((e=>e[y])),B=s.scaleBand().range([0,w]).domain(z).paddingInner(.8).paddingOuter(.7),R=s.max(e.map((e=>Number.parseFloat(e[x])))),T=s.max(e.map((e=>Number.parseFloat(e[f])))),N=s.max([T,R]),D=d,I=s.scaleLinear().range([600,0]).domain([D,N]),E=s.scaleLinear().range([600,C]).domain([D,N]),P=B.bandwidth()**2*1,O=L.append("g").attr("class","test-symbol").append("path").attr("d",A.size(P)),V=O.node().getBBox().height,W=Math.sqrt(P)/V;O.remove();const G=L.append("g").attr("class","left-bars"),Y=G.selectAll("g").data(e).join("g").attr("class","bar").on("mouseover",(function(e,t){s.select(this).classed("bar-hovered",!0),S.transition().duration(200).style("opacity",1),S.html(`${g}: ${t[f]}`),S.style("left",`${e.clientX}px`).style("top",`${e.clientY+20+window.scrollY}px`)})).on("mouseout",(function(){s.select(this).classed("bar-hovered",!1),S.style("left","-300px").transition().duration(500).style("opacity",0)}));Y.append("rect").attr("x",(e=>I(e[f])+V)).attr("y",(e=>B(e[y]))).attr("height",B.bandwidth()).attr("width",(e=>{const t=I(D)-I(e[f])-V;return t>0?t:0})).attr("fill",l[0]).attr("stroke-width",1).attr("opacity",c),Y.append("path").attr("transform",(e=>{const t=I(D)-I(e[f]);return`translate(${t>V?I(e[f])+2*V/3:I(D)-t/3}, ${B(e[y])+B.bandwidth()/2})\n         rotate(-90)`})).attr("d",(e=>{const t=I(D)-I(e[f]);if(t>V)return A.size(P)(e);const a=(t*W)**2;return A.size(a)()})).attr("fill",l[0]).attr("opacity",c),Y.append("text").text((e=>e[b])).attr("text-anchor","end").style("dominant-baseline","middle").attr("x",(e=>I(e[f])-5)).attr("y",(e=>B(e[y])+B.bandwidth()/2)).style("font-size","14px").attr("stroke","#333").attr("stroke-width",0);const H=L.append("g").attr("class","right-bars"),_=H.selectAll("g").data(e).join("g").attr("class","bar").on("mouseover",(function(e,t){s.select(this).classed("bar-hovered",!0),S.transition().duration(200).style("opacity",1),S.html(`${h}: ${t[x]}`),S.style("left",`${e.clientX}px`).style("top",`${e.clientY+20+window.scrollY}px`)})).on("mouseout",(function(){s.select(this).classed("bar-hovered",!1),S.style("left","-300px").transition().duration(500).style("opacity",0)}));_.append("rect").attr("x",E(D)).attr("y",(e=>B(e[y]))).attr("height",B.bandwidth()).attr("width",(e=>{const t=-E(D)+E(e[x])-V;return t>0?t:0})).attr("fill",l[1]).attr("stroke-width",1).attr("opacity",c),_.append("path").attr("transform",(e=>{const t=-E(D)+E(e[x]),a=E(e[x])-2*V/3;return`translate(${t>V?a:E(D)+t/3}, ${B(e[y])+B.bandwidth()/2}) rotate(90)`})).attr("d",(e=>{const t=-E(D)+E(e[x]);if(t>V)return A.size(P)();const a=(t*W)**2;return A.size(a)()})).attr("fill",l[1]).attr("opacity",c),_.append("text").text((e=>e[v])).attr("text-anchor","start").style("dominant-baseline","middle").attr("x",(e=>E(e[x])+5)).attr("y",(e=>B(e[y])+B.bandwidth()/2)).style("font-size","14px").attr("stroke","#333").attr("stroke-width",0),L.append("g").selectAll("text").data(e).join("text").text((e=>e[y])).attr("x",600).attr("y",(e=>B(e[y])-7)).attr("text-anchor","middle").attr("dominant-baseline","text-top").attr("fill","#444").attr("font-weight","bold"),G.append("g").call(s.axisTop(I).tickSize(p)).call((e=>{e.select(".domain").remove(),e.selectAll(".tick line").attr("stroke","#555"),e.selectAll(".tick text").attr("fill","#555").attr("font-size",12)})),H.append("g").call(s.axisTop(E).tickSize(p)).call((e=>{e.select(".domain").remove(),e.selectAll(".tick line").attr("stroke","#555"),e.selectAll(".tick text").attr("fill","#555").attr("font-size",12),e.select(".tick > line:first-of-type").remove(),e.select(".tick > text:first-of-type").remove()}));const j=L.append("g").attr("class","top-legend");j.append("rect").attr("x",I(D)-.5).attr("y",5*-p).attr("height",2*p).attr("width",2).attr("fill","#000"),j.append("path").attr("d",A.size(P/2)).attr("transform",`translate(${I(D)-V/4-5-.5}, ${4*-p}) rotate(-90)`).attr("fill",l[0]),j.append("text").text(g).attr("transform",`translate(${I(D)-V-5-.5}, ${4*-p}) `).attr("fill",l[0]).attr("dominant-baseline","middle").attr("text-anchor","end").attr("style","font-weight: bold;"),j.append("path").attr("d",A.size(P/2)).attr("transform",`translate(${I(D)+V/4+5+1.5}, ${4*-p}) rotate(90)`).attr("fill",l[1]),j.append("text").text(h).attr("transform",`translate(${I(D)+V+5+1.5}, ${4*-p}) `).attr("fill",l[1]).attr("dominant-baseline","middle").attr("text-anchor","start").attr("style","font-weight: bold;"),j.append("text").text(u).attr("transform",`translate(${I(D)}, ${6*-p}) `).attr("fill","#333").attr("dominant-baseline","middle").attr("text-anchor","middle").attr("style","font-weight: bold;"),m({allComponents:k,svg:$,margins:{marginLeft:o,marginRight:n,marginTop:i,marginBottom:r}})}const be={yField:[b,v],barLeftValueField:[x],barRightValueField:[x]},ve={aspectRatio:w([.1,Number.POSITIVE_INFINITY]),marginTop:C,marginRight:C,marginBottom:C,marginLeft:C,bgColor:k,colorScheme:L(2),barValueMidPoint:C,barOpacity:w([0,1])};e.renderBubbleHorizontal=Y,e.renderCalendar=ee,e.renderChord=pe,e.renderComparativeBar=xe,e.renderDominoBase=M,e.renderDominoRibbon=le,e.renderMace=y,e.renderMotionBubble=re,e.renderRidgeline=Q,e.renderSankey=E,e.validateAndRenderBubbleHorizontal=({dataPath:e,options:t,dimensions:a,chartContainerSelector:i})=>{const n=F({optionTypes:j,options:t});s.csv(e).then((e=>{const{columns:r}=e,s=B({columns:r,dimensions:a}),o=f({data:e,dimensionTypes:_,dimensions:a}),l={valid:!0,messages:[]};[s,o,n].forEach((e=>{l.valid=l.valid&&e.valid,e.valid||l.messages.push(e.message)})),l.valid?Y({data:e,dimensions:a,options:t,chartContainerSelector:i}):R(i,l.messages)}))},e.validateAndRenderCalendar=({dataPath:e,options:t,dimensions:a,chartContainerSelector:i})=>{s[(e=>{const[t]=e.split(".").slice(-1);return t})(e)](e).then((e=>{const{columns:n}=e,{flatDimensions:r,dimensionTypesWYFields:s,optionTypesWYFields:l}=function({dimensions:e,dimensionTypes:t,optionTypes:a}){const i={},n={},r=e.yFields;var s;return r.forEach(((e,t)=>{i[`__yField${t}__`]=[x],n[`__yField${t}__`]=e})),{flatDimensions:{...e,...n},dimensionTypesWYFields:{...t,...i},optionTypesWYFields:{...a,yFieldLabels:(s=r.length,e=>o.default.isArray(e)?s&&e.length<s?{valid:!1,message:`Should be an array with minimum length: ${s}`}:{valid:!0}:{valid:!1,message:"Should be a valid array"}),colorScheme:L(r.length)}}}({dimensions:a,dimensionTypes:te,optionTypes:ae}),c=F({optionTypes:l,options:t}),d=B({columns:n,dimensions:r}),m=f({data:e,dimensionTypes:s,dimensions:r}),p={valid:!0,messages:[]};[d,m,c].forEach((e=>{p.valid=p.valid&&e.valid,e.valid||p.messages.push(e.message)})),p.valid?ee({data:e,dimensions:a,options:t,chartContainerSelector:i}):R(i,p.messages)}))},e.validateAndRenderChord=({dataPath:e,options:t,dimensions:a,chartContainerSelector:i})=>{const n=F({optionTypes:fe,options:t});s.csv(e).then((e=>{const{columns:r}=e,s=B({columns:r,dimensions:a}),o=f({data:e,dimensionTypes:ye,dimensions:a}),l={valid:!0,messages:[]};[s,o,n].forEach((e=>{l.valid=l.valid&&e.valid,e.valid||l.messages.push(e.message)})),l.valid?pe({data:e,dimensions:a,options:t,chartContainerSelector:i}):R(i,l.messages)}))},e.validateAndRenderComparativeBar=function({dataPath:e,options:t,dimensions:a,chartContainerSelector:i}){const n=F({optionTypes:ve,options:t});s.csv(e).then((e=>{const{columns:r}=e,s=B({columns:r,dimensions:a}),o=f({data:e,dimensionTypes:be,dimensions:a}),l={valid:!0,messages:[]};[s,o,n].forEach((e=>{l.valid=l.valid&&e.valid,e.valid||l.messages.push(e.message)})),l.valid?xe({data:e,dimensions:a,options:t,chartContainerSelector:i}):R(i,l.messages)}))},e.validateAndRenderDominoBase=({dataPath:e,options:t,dimensions:a,chartContainerSelector:i})=>{const n=F({optionTypes:X,options:t});s.csv(e).then((e=>{const{columns:r}=e,s=B({columns:r,dimensions:a}),o=f({data:e,dimensionTypes:q,dimensions:a}),l={valid:!0,messages:[]};[s,o,n].forEach((e=>{l.valid=l.valid&&e.valid,e.valid||l.messages.push(e.message)})),l.valid?M({data:e,dimensions:a,options:t,chartContainerSelector:i}):R(i,l.messages)}))},e.validateAndRenderDominoRibbon=({dataPath:e,options:t,dimensions:a,chartContainerSelector:i})=>{const n=F({optionTypes:de,options:t});s.csv(e).then((e=>{const{columns:r}=e,s=B({columns:r,dimensions:a}),o=f({data:e,dimensionTypes:ce,dimensions:a}),l={valid:!0,messages:[]};[s,o,n].forEach((e=>{l.valid=l.valid&&e.valid,e.valid||l.messages.push(e.message)})),l.valid?le({data:e,dimensions:a,options:t,chartContainerSelector:i}):R(i,l.messages)}))},e.validateAndRenderMace=({dataPath:e,options:t,dimensions:a,chartContainerSelector:i})=>{const n=F({optionTypes:N,options:t});s.csv(e).then((e=>{const{columns:r}=e,s=B({columns:r,dimensions:a}),o=f({data:e,dimensionTypes:T,dimensions:a}),l={valid:!0,messages:[]};[s,o,n].forEach((e=>{l.valid=l.valid&&e.valid,e.valid||l.messages.push(e.message)})),l.valid?y({data:e,dimensions:a,options:t,chartContainerSelector:i}):R(i,l.messages)}))},e.validateAndRenderMotionBubble=({dataPath:e,options:t,dimensions:a,chartContainerSelector:i})=>{const n=F({optionTypes:oe,options:t});s.csv(e).then((e=>{const{columns:r}=e,s=B({columns:r,dimensions:a}),o=f({data:e,dimensionTypes:se,dimensions:a}),l={valid:!0,messages:[]};[s,o,n].forEach((e=>{l.valid=l.valid&&e.valid,e.valid||l.messages.push(e.message)})),l.valid?re({data:e,dimensions:a,options:t,chartContainerSelector:i}):R(i,l.messages)}))},e.validateAndRenderRidgeline=({dataPath:e,options:t,dimensions:a,chartContainerSelector:i})=>{const n=F({optionTypes:K,options:t});s.csv(e).then((e=>{const{columns:r}=e,s=B({columns:r,dimensions:a}),o=f({data:e,dimensionTypes:U,dimensions:a}),l={valid:!0,messages:[]};[s,o,n].forEach((e=>{l.valid=l.valid&&e.valid,e.valid||l.messages.push(e.message)})),l.valid?Q({data:e,dimensions:a,options:t,chartContainerSelector:i}):R(i,l.messages)}))},e.validateAndRenderSankey=({dataPath:e,options:t,dimensions:a,chartContainerSelector:i})=>{const n=F({optionTypes:O,options:t});s.csv(e).then((e=>{const{columns:r}=e,s=B({columns:r,dimensions:a}),o=f({data:e,dimensionTypes:P,dimensions:a}),l={valid:!0,messages:[]};[s,o,n].forEach((e=>{l.valid=l.valid&&e.valid,e.valid||l.messages.push(e.message)})),l.valid?E({data:e,dimensions:a,options:t,chartContainerSelector:i}):R(i,l.messages)}))},Object.defineProperty(e,"__esModule",{value:!0})}));
